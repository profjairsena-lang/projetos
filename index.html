<!doctype html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avalia√ß√£o de Tempo de Leitura</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&amp;display=swap" rel="stylesheet">
    <style>
        body {
            box-sizing: border-box;
        }

        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

        .digital-font {
            font-family: 'Share Tech Mono', 'Orbitron', 'Courier New', monospace;
            font-weight: 400;
            letter-spacing: 0.15em;
            text-shadow: 0 0 10px rgba(99, 102, 241, 0.3);
        }

        .next-cell-highlight {
            background-color: #fef3c7 !important;
            border: 3px solid #f59e0b !important;
            box-shadow: 0 0 15px rgba(245, 158, 11, 0.5);
            animation: pulse-highlight 1.5s infinite;
        }

        @keyframes pulse-highlight {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }
    </style>
    <style>
        @view-transition {
            navigation: auto;
        }
    </style>
    <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
    <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
</head>

<body class="bg-gradient-to-br from-blue-50 to-indigo-100 p-8 min-h-full"><!-- Modal de Configura√ß√£o Inicial -->
    <div id="config-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-8 max-w-2xl w-full mx-4 shadow-2xl">
            <div class="text-center mb-6">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">‚öôÔ∏è Configura√ß√£o da Avalia√ß√£o</h2>
                <p class="text-gray-600">Preencha os dados antes de iniciar a avalia√ß√£o</p>
            </div>
            <form id="config-form" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div><label for="modal-studentName" class="block text-sm font-medium text-gray-700 mb-2"> üë§ Nome do
                            Aluno * </label> <input type="text" id="modal-studentName" required
                            placeholder="Digite o nome completo do aluno"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                    <div><label for="modal-classYear" class="block text-sm font-medium text-gray-700 mb-2"> üéì Ano/Turma
                            * </label> <input type="text" id="modal-classYear" required
                            placeholder="Ex: 4¬∫ Ano A, 5¬∫ B, etc."
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                    <div><label for="modal-teacherName" class="block text-sm font-medium text-gray-700 mb-2"> üë©‚Äçüè´ Nome
                            do Professor * </label> <input type="text" id="modal-teacherName" required
                            placeholder="Digite o nome do professor"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                    <div><label for="modal-previousProgress" class="block text-sm font-medium text-gray-700 mb-2"> üìä
                            Progresso Anterior (%) </label> <input type="number" id="modal-previousProgress" min="0"
                            max="100" placeholder="0 a 100"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                    </div>
                </div>
                <div><label for="modal-schoolYear" class="block text-sm font-medium text-gray-700 mb-2"> üìö Ano Escolar
                        e PPM Esperado * </label> <select id="modal-schoolYear" required
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        <option value="">Selecione o ano escolar</option>
                        <option value="55">1¬∫ Ano - 55 PPM</option>
                        <option value="70">2¬∫ Ano - 70 PPM</option>
                        <option value="100">3¬∫ Ano - 100 PPM</option>
                        <option value="115">4¬∫ Ano - 115 PPM</option>
                        <option value="135">5¬∫ Ano - 135 PPM</option>
                    </select>
                </div>
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-blue-800 mb-2">‚ÑπÔ∏è Informa√ß√µes Importantes:</h3>
                    <ul class="text-sm text-blue-700 space-y-1">
                        <li>‚Ä¢ Todos os campos marcados com * s√£o obrigat√≥rios</li>
                        <li>‚Ä¢ O Progresso Anterior pode ficar em branco (ser√° considerado 0%)</li>
                        <li>‚Ä¢ PPM = Palavras Por Minuto (velocidade de leitura esperada)</li>
                    </ul>
                </div>
                <div class="flex gap-4 pt-4"><button type="submit"
                        class="flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition-all transform hover:scale-105">
                        ‚úÖ Iniciar Avalia√ß√£o </button> <button type="button" onclick="resetConfigForm()"
                        class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition-all">
                        üîÑ Limpar </button>
                </div>
            </form>
        </div>
    </div><!-- Modal de Relat√≥rio -->
    <div id="report-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-6 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-2xl font-bold text-gray-800">üìÑ Relat√≥rio de Avalia√ß√£o</h3>
                <div class="flex gap-2"><button id="print-report"
                        class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-all">
                        üñ®Ô∏è Imprimir </button> <button id="close-report"
                        class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-all">
                        ‚úñÔ∏è Fechar </button>
                </div>
            </div>
            <div id="report-content" class="bg-white p-8 border border-gray-300"
                style="width: 210mm; min-height: 297mm; font-family: 'Times New Roman', serif; font-size: 12pt; line-height: 1.5;">
                <!-- Conte√∫do do relat√≥rio ser√° inserido aqui -->
            </div>
        </div>
    </div>
    <div class="max-w-7xl mx-auto">
        <div class="bg-white rounded-2xl shadow-2xl overflow-hidden"><!-- Cabe√ßalho com Cron√¥metro -->
            <div class="p-4 text-center" style="background-color: #823c3c;">
                <h1 class="text-3xl font-bold text-white mb-4">Avalia√ß√£o de Tempo de Leitura</h1>
                <div class="flex items-center justify-center gap-6">
                    <div class="space-x-3"><button onclick="startTimer()"
                            class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                            ‚ñ∂ Iniciar </button> <button onclick="pauseTimer()"
                            class="bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                            ‚è∏ Pausar </button> <button onclick="resetTimer()"
                            class="bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                            ‚èπ Resetar </button> <button onclick="openReportModal()"
                            class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                            üìÑ Relat√≥rio </button>
                    </div>
                </div>
            </div><!-- Painel de Informa√ß√µes da Avalia√ß√£o -->
            <div class="p-4 bg-gray-50 border-b">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div class="bg-white p-3 rounded-lg shadow-sm">
                        <h3 class="text-xs font-medium text-gray-600 mb-1">üë§ Aluno</h3>
                        <p class="text-sm font-semibold text-gray-800" id="display-studentName">-</p>
                    </div>
                    <div class="bg-white p-3 rounded-lg shadow-sm">
                        <h3 class="text-xs font-medium text-gray-600 mb-1">üéì Turma</h3>
                        <p class="text-sm font-semibold text-gray-800" id="display-classYear">-</p>
                    </div>
                    <div class="bg-white p-3 rounded-lg shadow-sm">
                        <h3 class="text-xs font-medium text-gray-600 mb-1">üë©‚Äçüè´ Professor</h3>
                        <p class="text-sm font-semibold text-gray-800" id="display-teacherName">-</p>
                    </div>
                    <div class="bg-white p-3 rounded-lg shadow-sm">
                        <h3 class="text-xs font-medium text-gray-600 mb-1">üìö Ano/PPM</h3>
                        <p class="text-sm font-semibold text-gray-800" id="display-schoolYear">-</p>
                    </div>
                </div>
                <div class="mt-4 text-center"><button onclick="openConfigModal()"
                        class="bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors">
                        ‚öôÔ∏è Reconfigurar Avalia√ß√£o </button>
                </div>
            </div><!-- Painel de Resultados -->
            <div class="p-4 bg-blue-50 border-b">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="text-sm font-medium text-gray-600">Velocidade Atual</h3>
                        <p class="text-2xl font-bold text-indigo-600" id="currentPPM">0 PPM</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="text-sm font-medium text-gray-600">Classifica√ß√£o</h3>
                        <p class="text-lg font-bold" id="classification">-</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="text-sm font-medium text-gray-600">Resultado Alcan√ßado</h3>
                        <p class="text-2xl font-bold text-green-600" id="achievedResult">0%</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="text-sm font-medium text-gray-600">M√©dia Letras/Palavra</h3>
                        <p class="text-2xl font-bold text-purple-600" id="avgLetters">0</p>
                    </div>
                </div>
            </div><!-- Tabela -->
            <div id="table-container" class="p-4 overflow-x-auto hidden"><!-- Cron√¥metro acima da tabela -->
                <div class="flex justify-center mb-6">
                    <div class="bg-white rounded-xl p-6 shadow-lg border-2 border-indigo-200">
                        <div class="text-5xl font-bold text-indigo-600 digital-font text-center" id="table-timer">
                            00:00
                        </div>
                    </div>
                </div>
                <table class="w-full border-collapse">
                    <thead>
                        <tr class="bg-white">
                            <th class="p-2 font-semibold text-lg bg-white w-12" style="color: #e2d9db;">#</th>
                            <th class="p-3 font-semibold text-lg bg-white" style="color: #e2d9db;">1</th>
                            <th class="p-3 font-semibold text-lg bg-white" style="color: #e2d9db;">2</th>
                            <th class="p-3 font-semibold text-lg bg-white" style="color: #e2d9db;">3</th>
                            <th class="p-3 font-semibold text-lg bg-white" style="color: #e2d9db;">4</th>
                            <th class="p-3 font-semibold text-lg bg-white" style="color: #e2d9db;">5</th>
                            <th class="p-3 font-semibold text-lg bg-white" style="color: #e2d9db;">6</th>
                            <th class="p-3 font-semibold text-lg bg-white" style="color: #e2d9db;">7</th>
                            <th class="p-3 font-semibold text-lg bg-white" style="color: #e2d9db;">8</th>
                            <th class="p-3 font-semibold text-lg bg-white" style="color: #e2d9db;">9</th>
                            <th class="p-3 font-semibold text-lg bg-white" style="color: #e2d9db;">10</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr class="hover:bg-indigo-50 transition-colors">
                            <th class="p-2 font-semibold text-lg bg-white w-12" style="color: #e2d9db;">1</th>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">b</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">C</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">d</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">E</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">f</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">G</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">h</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">I</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">j</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">L</td>
                        </tr>
                        <tr class="hover:bg-indigo-50 transition-colors">
                            <th class="p-2 font-semibold text-lg bg-white w-12" style="color: #e2d9db;">2</th>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">m</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">N</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">o</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">P</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">q</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">R</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">s</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">T</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">u</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">v</td>
                        </tr>
                        <tr class="hover:bg-indigo-50 transition-colors">
                            <th class="p-2 font-semibold text-lg bg-white w-12" style="color: #e2d9db;">3</th>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">w</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">x</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">y</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">z</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">A</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">B</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">D</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">F</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">H</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">J</td>
                        </tr>
                        <tr class="hover:bg-indigo-50 transition-colors">
                            <th class="p-2 font-semibold text-lg bg-white w-12" style="color: #e2d9db;">4</th>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">K</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">M</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">O</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">Q</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">S</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">U</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">V</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">W</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">X</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">Y</td>
                        </tr>
                        <tr class="hover:bg-indigo-50 transition-colors">
                            <th class="p-2 font-semibold text-lg bg-white w-12" style="color: #e2d9db;">5</th>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">Z</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">a</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">c</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">e</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">g</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">i</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">k</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">l</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">n</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">p</td>
                        </tr>
                        <tr class="hover:bg-indigo-50 transition-colors">
                            <th class="p-2 font-semibold text-lg bg-white w-12" style="color: #e2d9db;">6</th>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">r</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">t</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">C</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">E</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">G</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">I</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">K</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">L</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">N</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">P</td>
                        </tr>
                        <tr class="hover:bg-indigo-50 transition-colors">
                            <th class="p-2 font-semibold text-lg bg-white w-12" style="color: #e2d9db;">7</th>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">R</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">T</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">b</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">d</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">f</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">h</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">j</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">m</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">o</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">q</td>
                        </tr>
                        <tr class="hover:bg-indigo-50 transition-colors">
                            <th class="p-2 font-semibold text-lg bg-white w-12" style="color: #e2d9db;">8</th>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">s</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">u</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">v</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">w</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">x</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">y</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">z</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">A</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">B</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">D</td>
                        </tr>
                        <tr class="hover:bg-indigo-50 transition-colors">
                            <th class="p-2 font-semibold text-lg bg-white w-12" style="color: #e2d9db;">9</th>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">F</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">H</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">J</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">M</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">O</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">Q</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">S</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">U</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">V</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">W</td>
                        </tr>
                        <tr class="hover:bg-indigo-50 transition-colors">
                            <th class="p-2 font-semibold text-lg bg-white w-12" style="color: #e2d9db;">10</th>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">X</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">Y</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">Z</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">a</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">c</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">e</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">g</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">i</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">k</td>
                            <td class="border-2 border-indigo-200 p-3 text-center text-xl font-semibold cursor-pointer clickable-cell"
                                onclick="handleCellClick(this)">l</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div><!-- Rodap√© -->
    <footer class="mt-8 text-center">
        <div class="bg-white rounded-lg shadow-md p-4">
            <p class="text-gray-600 text-sm">¬© 2025 <span class="font-semibold text-indigo-600">Desafio das
                    Palavras</span> ‚Äî Desenvolvido por <span class="font-semibold text-gray-800">Prof Jair Sena</span>
            </p>
        </div>
    </footer>
    <script>
        let seconds = 0;
        let timerInterval = null;
        let isRunning = false;
        let cellClickCounts = new Map(); // Armazena quantas vezes cada c√©lula foi clicada

        // Sistema de contagem autom√°tica
        let lastClickedCell = null;
        let lastClickTime = 0;
        let consecutiveGreenCells = 0;
        let consecutiveRedCells = 0;
        let timePerLetterByYear = {
            55: 2.41,   // 1¬∫ Ano - 55 PPM - 2.41 segundos por letra
            70: 1.89,   // 2¬∫ Ano - 70 PPM - 1.89 segundos por letra
            100: 2.132, // 3¬∫ Ano - 100 PPM - 2.132 segundos por letra
            115: 1.15,  // 4¬∫ Ano - 115 PPM - 1.15 segundos por letra
            135: 0.98   // 5¬∫ Ano - 135 PPM - 0.98 segundos por letra
        };
        let originalTimePerLetter = 1.15; // Valor original para resetar (4¬∫ Ano padr√£o)
        let currentTimePerLetter = 1.15; // Valor atual (pode ser ajustado)

        function updateDisplay() {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            const timeString = String(mins).padStart(2, '0') + ':' + String(secs).padStart(2, '0');

            const tableTimerElement = document.getElementById('table-timer');

            // Atualizar apenas o cron√¥metro da tabela
            tableTimerElement.textContent = timeString;

            // Manter cor azul de 1 a 59 segundos
            if (seconds >= 1 && seconds <= 59) {
                tableTimerElement.classList.remove('text-red-600');
                tableTimerElement.classList.add('text-indigo-600');
            }

            if (seconds >= 60) {
                pauseTimer();
                tableTimerElement.classList.remove('text-indigo-600');
                tableTimerElement.classList.add('text-red-600');
                blockAllCells();
            }
        }

        function startTimer() {
            if (!isRunning) {
                isRunning = true;

                // PRIMEIRO: Mostrar tabela imediatamente
                document.getElementById('table-container').classList.remove('hidden');

                // SEGUNDO: Iniciar contagem regressiva de 5 segundos
                let countdown = 5;
                const tableTimerElement = document.getElementById('table-timer');

                // Mostrar contagem regressiva em vermelho no cron√¥metro da tabela
                tableTimerElement.classList.add('text-red-600');
                tableTimerElement.textContent = countdown.toString();

                const countdownInterval = setInterval(() => {
                    countdown--;
                    if (countdown > 0) {
                        tableTimerElement.textContent = countdown.toString();
                    } else {
                        // Finalizar contagem regressiva
                        clearInterval(countdownInterval);

                        // Mudar para azul e iniciar cron√¥metro normal
                        tableTimerElement.classList.remove('text-red-600');
                        tableTimerElement.classList.add('text-indigo-600');

                        // Iniciar cron√¥metro normal
                        seconds = 0;
                        timerInterval = setInterval(() => {
                            seconds++;
                            updateDisplay();
                        }, 1000);
                    }
                }, 1000);
            }
        }

        function pauseTimer() {
            isRunning = false;
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        function resetTimer() {
            pauseTimer();
            seconds = 0;
            const tableTimerElement = document.getElementById('table-timer');

            // Resetar cores do cron√¥metro da tabela
            tableTimerElement.classList.remove('text-red-600', 'text-indigo-600');
            tableTimerElement.textContent = '00:00';

            // Ocultar tabela novamente
            document.getElementById('table-container').classList.add('hidden');

            // Cancelar timer autom√°tico se existir
            if (window.autoRedTimer) {
                clearTimeout(window.autoRedTimer);
                window.autoRedTimer = null;
            }

            // Resetar tamb√©m os cliques das c√©lulas
            cellClickCounts.clear();
            const cells = document.querySelectorAll('.clickable-cell');
            cells.forEach(cell => {
                cell.classList.remove('bg-green-500', 'bg-red-500', 'border-green-600', 'border-red-600', 'next-cell-highlight');
                cell.classList.add('border-indigo-200');
                cell.style.color = '';
                cell.style.fontWeight = '';
            });

            // Resetar sistema de contagem autom√°tica
            lastClickedCell = null;
            lastClickTime = 0;
            consecutiveGreenCells = 0;
            consecutiveRedCells = 0;
            updateTimePerLetterForYear(); // Resetar tempo por letra para o ano selecionado

            // Desbloquear todas as c√©lulas
            unblockAllCells();

            // Resetar c√°lculos
            updateCalculations();
        }

        function handleCellClick(cell) {
            // Verificar se as c√©lulas est√£o bloqueadas
            if (cell.classList.contains('blocked')) {
                return; // N√£o permitir cliques em c√©lulas bloqueadas
            }

            const cellId = cell.textContent + '_' + cell.parentElement.rowIndex + '_' + cell.cellIndex;
            const currentCount = cellClickCounts.get(cellId) || 0;
            const newCount = currentCount + 1;
            const currentTime = Date.now();

            cellClickCounts.set(cellId, newCount);

            // Remover classes anteriores e destaque
            cell.classList.remove('bg-green-500', 'bg-red-500', 'border-green-600', 'border-red-600', 'border-indigo-200', 'next-cell-highlight');

            if (newCount === 1) {
                // Primeiro clique = acerto (verde forte)
                cell.classList.add('bg-green-500', 'border-green-600');
                cell.style.color = 'white';
                cell.style.fontWeight = 'bold';

                // Cancelar timer anterior se existir
                if (window.autoRedTimer) {
                    clearTimeout(window.autoRedTimer);
                }

                // Verificar se √© a √∫ltima c√©lula da linha para navegar automaticamente
                const currentRow = cell.parentElement;
                const currentCellIndex = cell.cellIndex;
                const totalCellsInRow = currentRow.cells.length - 1; // -1 porque a primeira c√©lula √© o n√∫mero da linha

                if (currentCellIndex === totalCellsInRow) {
                    // √â a √∫ltima c√©lula da linha - navegar para pr√≥xima linha
                    navigateToNextRow(currentRow);
                } else {
                    // N√£o √© a √∫ltima c√©lula - continuar timer normal
                    window.autoRedTimer = setTimeout(() => {
                        // Verificar se esta c√©lula ainda √© a √∫ltima clicada
                        if (lastClickedCell === cell) {
                            autoMarkCellAsError(cell);
                        }
                    }, currentTimePerLetter * 1000);
                }

                // Atualizar contadores de sequ√™ncia
                consecutiveGreenCells++;
                consecutiveRedCells = 0;

                // Verificar se temos 4 c√©lulas verdes em sequ√™ncia
                if (consecutiveGreenCells >= 4) {
                    resetTimePerLetter();
                    consecutiveGreenCells = 0;
                }

            } else if (newCount === 2) {
                // Segundo clique = erro (vermelho forte)
                cell.classList.add('bg-red-500', 'border-red-600');
                cell.style.color = 'white';
                cell.style.fontWeight = 'bold';

                // Cancelar timer se existir
                if (window.autoRedTimer) {
                    clearTimeout(window.autoRedTimer);
                }

                // Atualizar contadores de sequ√™ncia
                consecutiveRedCells++;
                consecutiveGreenCells = 0;

                // Verificar se temos 2 c√©lulas vermelhas em sequ√™ncia
                if (consecutiveRedCells >= 2) {
                    increaseTimePerLetter();
                    consecutiveRedCells = 0;
                }

            } else {
                // Mais de dois cliques - volta ao estado normal
                cell.classList.add('border-indigo-200');
                cell.style.color = '';
                cell.style.fontWeight = '';
                cellClickCounts.set(cellId, 0);
                consecutiveGreenCells = 0;
                consecutiveRedCells = 0;

                // Cancelar timer se existir
                if (window.autoRedTimer) {
                    clearTimeout(window.autoRedTimer);
                }
            }

            // Atualizar refer√™ncias para pr√≥ximo clique
            lastClickedCell = cell;
            lastClickTime = currentTime;

            // Atualizar c√°lculos em tempo real
            updateCalculations();
        }

        function navigateToNextRow(currentRow) {
            const tableBody = document.getElementById('tableBody');
            const rows = tableBody.querySelectorAll('tr');
            const currentRowIndex = Array.from(rows).indexOf(currentRow);

            // Verificar se h√° pr√≥xima linha
            if (currentRowIndex < rows.length - 1) {
                const nextRow = rows[currentRowIndex + 1];
                const firstCellOfNextRow = nextRow.cells[1]; // √çndice 1 porque 0 √© o n√∫mero da linha

                // Destacar visualmente a pr√≥xima c√©lula
                highlightNextCell(firstCellOfNextRow);

                // Iniciar timer para a pr√≥xima c√©lula com as MESMAS REGRAS
                window.autoRedTimer = setTimeout(() => {
                    // Verificar se a pr√≥xima c√©lula ainda n√£o foi clicada
                    const cellId = firstCellOfNextRow.textContent + '_' + firstCellOfNextRow.parentElement.rowIndex + '_' + firstCellOfNextRow.cellIndex;
                    const clickCount = cellClickCounts.get(cellId) || 0;

                    if (clickCount === 0) {
                        // Marcar automaticamente como erro (vermelho) se n√£o foi clicada
                        autoMarkCellAsError(firstCellOfNextRow);
                    }
                }, currentTimePerLetter * 1000);

                // Atualizar refer√™ncia da √∫ltima c√©lula clicada para a pr√≥xima
                lastClickedCell = firstCellOfNextRow;

            } else {
                // Chegou ao final da tabela
                console.log('Avalia√ß√£o conclu√≠da - todas as linhas foram percorridas');
                // Opcional: pausar timer automaticamente
                // pauseTimer();
            }
        }

        function highlightNextCell(cell) {
            // Remover destaque anterior
            const previousHighlight = document.querySelector('.next-cell-highlight');
            if (previousHighlight) {
                previousHighlight.classList.remove('next-cell-highlight');
            }

            // Adicionar destaque √† pr√≥xima c√©lula
            cell.classList.add('next-cell-highlight');
        }

        function autoMarkCellAsError(cell) {
            const cellId = cell.textContent + '_' + cell.parentElement.rowIndex + '_' + cell.cellIndex;

            // Marcar como segundo clique (erro)
            cellClickCounts.set(cellId, 2);

            // Atualizar visual com vermelho forte
            cell.classList.remove('bg-green-500', 'border-green-600', 'border-indigo-200', 'next-cell-highlight');
            cell.classList.add('bg-red-500', 'border-red-600');
            cell.style.color = 'white';
            cell.style.fontWeight = 'bold';

            // Atualizar contadores
            consecutiveRedCells++;
            consecutiveGreenCells = 0;

            // Verificar se temos 2 c√©lulas vermelhas em sequ√™ncia
            if (consecutiveRedCells >= 2) {
                increaseTimePerLetter();
                consecutiveRedCells = 0;
            }
        }

        function increaseTimePerLetter() {
            currentTimePerLetter += 0.100; // Adicionar 100ms
            console.log(`Tempo por letra aumentado para: ${currentTimePerLetter.toFixed(3)}s`);
        }

        function resetTimePerLetter() {
            currentTimePerLetter = originalTimePerLetter;
            console.log(`Tempo por letra resetado para: ${currentTimePerLetter.toFixed(3)}s`);
        }

        function updateTimePerLetterForYear() {
            // Buscar valor do campo oculto ou usar padr√£o
            const schoolYearInput = document.getElementById('schoolYear');
            const selectedYear = schoolYearInput ? parseInt(schoolYearInput.value) : 115;
            originalTimePerLetter = timePerLetterByYear[selectedYear] || 1.15;
            currentTimePerLetter = originalTimePerLetter;
            console.log(`Tempo por letra definido para ${selectedYear} PPM: ${currentTimePerLetter.toFixed(3)}s`);
        }



        function blockAllCells() {
            const cells = document.querySelectorAll('.clickable-cell');
            cells.forEach(cell => {
                cell.classList.add('blocked');
                cell.style.cursor = 'not-allowed';
                cell.style.opacity = '0.6';
            });
        }

        function unblockAllCells() {
            const cells = document.querySelectorAll('.clickable-cell');
            cells.forEach(cell => {
                cell.classList.remove('blocked');
                cell.style.cursor = 'pointer';
                cell.style.opacity = '1';
            });
        }

        function getReadCells() {
            const cells = document.querySelectorAll('.clickable-cell');
            let readCells = 0;
            let totalLetters = 0;

            cells.forEach(cell => {
                const cellId = cell.textContent + '_' + cell.parentElement.rowIndex + '_' + cell.cellIndex;
                const clickCount = cellClickCounts.get(cellId) || 0;

                if (clickCount >= 1) { // C√©lula foi lida (clicada pelo menos uma vez)
                    readCells++;
                    totalLetters += cell.textContent.length;
                }
            });

            return { readCells, totalLetters };
        }

        function updateCalculations() {
            const { readCells, totalLetters } = getReadCells();
            const timeInSeconds = seconds || 1; // Evitar divis√£o por zero

            // Buscar valores dos campos ocultos ou usar padr√µes
            const schoolYearInput = document.getElementById('schoolYear');
            const previousProgressInput = document.getElementById('previousProgress');

            const expectedPPM = schoolYearInput ? parseInt(schoolYearInput.value) : 115;
            const previousProgress = previousProgressInput ? parseInt(previousProgressInput.value) : 0;
            const totalCells = 100;

            // 1. Velocidade de Leitura Atual (PPM)
            const currentPPM = Math.round((readCells / timeInSeconds) * 60);
            document.getElementById('currentPPM').textContent = currentPPM + ' PPM';

            // 2. Classifica√ß√£o (C√°lculo A)
            let classification = '';
            let classColor = '';

            if (currentPPM >= expectedPPM) {
                classification = 'ADEQUADO';
                classColor = 'text-green-600';
            } else if (currentPPM >= (expectedPPM * 0.8)) {
                classification = 'EM DESENVOLVIMENTO';
                classColor = 'text-yellow-600';
            } else {
                classification = 'NECESSITA APOIO';
                classColor = 'text-red-600';
            }

            const classElement = document.getElementById('classification');
            classElement.textContent = classification;
            classElement.className = 'text-lg font-bold ' + classColor;

            // 3. Resultado Alcan√ßado (M√©dia de Progresso)
            const currentProgress = Math.round((readCells / totalCells) * 100);
            const achievedResult = Math.round((previousProgress + currentProgress) / 2);
            document.getElementById('achievedResult').textContent = achievedResult + '%';

            // 4. M√©dia de Letras por Palavra
            const avgLetters = readCells > 0 ? (totalLetters / readCells).toFixed(1) : 0;
            document.getElementById('avgLetters').textContent = avgLetters;
        }



        function openReportModal() {
            generateReportContent();
            document.getElementById('report-modal').classList.remove('hidden');
        }

        function closeReportModal() {
            document.getElementById('report-modal').classList.add('hidden');
        }

        function generateReportContent() {
            // USAR DADOS EXATOS DA AVALIA√á√ÉO EM TEMPO REAL
            const { readCells, totalLetters } = getReadCells();
            const timeInSeconds = seconds; // Tempo real do cron√¥metro
            const expectedPPM = parseInt(document.getElementById('schoolYear').value) || 115;
            const previousProgress = parseInt(document.getElementById('previousProgress').value) || 0;

            // C√ÅLCULOS REALIZADOS PELO PR√ìPRIO SISTEMA
            const currentPPM = timeInSeconds > 0 ? Math.round((readCells / timeInSeconds) * 60) : 0;
            const currentProgress = Math.round((readCells / 100) * 100);
            const achievedResult = Math.round((previousProgress + currentProgress) / 2);
            const avgLetters = readCells > 0 ? (totalLetters / readCells).toFixed(1) : '0.0';

            // C√°lculo (Palavras/Letras) - Raz√£o de efici√™ncia de leitura
            const wordsPerLetters = totalLetters > 0 ? (readCells / totalLetters).toFixed(3) : '0.000';

            // CLASSIFICA√á√ÉO BASEADA NO SISTEMA ATUAL
            const classificationElement = document.getElementById('classification');
            const classification = classificationElement.textContent;

            // DADOS PREENCHIDOS DOS CAMPOS OCULTOS
            const schoolYearInput = document.getElementById('schoolYear');
            const schoolYearValue = schoolYearInput ? schoolYearInput.value : '115';
            const schoolYearText = schoolYearValue ? `${getYearText(schoolYearValue)} - ${schoolYearValue} PPM` : '4¬∫ Ano - 115 PPM';

            const studentNameInput = document.getElementById('studentName');
            const classYearInput = document.getElementById('classYear');
            const teacherNameInput = document.getElementById('teacherName');

            const studentName = studentNameInput ? studentNameInput.value : '';
            const classYear = classYearInput ? classYearInput.value : '';
            const teacherName = teacherNameInput ? teacherNameInput.value : '';

            // DATA E HORA ATUAIS (MOMENTO DA AVALIA√á√ÉO)
            const now = new Date();
            const date = now.toLocaleDateString('pt-BR');
            const time = now.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });

            // TEMPO DE LEITURA FORMATADO
            const readingTime = `${Math.floor(timeInSeconds / 60)}:${String(timeInSeconds % 60).padStart(2, '0')}`;

            const reportContent = `
                <div style="text-align: center; margin-bottom: 30px;">
                    <h1 style="font-size: 18pt; font-weight: bold; margin-bottom: 10px;">RELAT√ìRIO DE AVALIA√á√ÉO DE FLU√äNCIA DE LEITURA</h1>
                    <hr style="border: 1px solid #000; margin: 20px 0;">
                </div>

                <div style="margin-bottom: 25px;">
                    <h2 style="font-size: 14pt; font-weight: bold; margin-bottom: 15px; border-bottom: 1px solid #ccc; padding-bottom: 5px;">DADOS DO ALUNO</h2>
                    <table style="width: 100%; border-collapse: collapse;">
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc; font-weight: bold; width: 30%;">Nome do Aluno:</td>
                            <td style="padding: 8px; border: 1px solid #ccc;">${studentName}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc; font-weight: bold;">Ano/Turma:</td>
                            <td style="padding: 8px; border: 1px solid #ccc;">${classYear}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc; font-weight: bold;">Professor(a):</td>
                            <td style="padding: 8px; border: 1px solid #ccc;">${teacherName}</td>
                        </tr>
                    </table>
                </div>

                <div style="margin-bottom: 25px;">
                    <h2 style="font-size: 14pt; font-weight: bold; margin-bottom: 15px; border-bottom: 1px solid #ccc; padding-bottom: 5px;">DADOS DA AVALIA√á√ÉO</h2>
                    <table style="width: 100%; border-collapse: collapse;">
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc; font-weight: bold; width: 30%;">Data:</td>
                            <td style="padding: 8px; border: 1px solid #ccc;">${date}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc; font-weight: bold;">Hor√°rio:</td>
                            <td style="padding: 8px; border: 1px solid #ccc;">${time}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc; font-weight: bold;">Ano Escolar:</td>
                            <td style="padding: 8px; border: 1px solid #ccc;">${schoolYearText}</td>
                        </tr>
                    </table>
                </div>

                <div style="margin-bottom: 25px;">
                    <h2 style="font-size: 14pt; font-weight: bold; margin-bottom: 15px; border-bottom: 1px solid #ccc; padding-bottom: 5px;">RESULTADOS OBTIDOS</h2>
                    <table style="width: 100%; border-collapse: collapse;">
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc; font-weight: bold; width: 30%;">C√©lulas Lidas:</td>
                            <td style="padding: 8px; border: 1px solid #ccc;">${readCells} de 100 c√©lulas</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc; font-weight: bold;">Tempo de Leitura:</td>
                            <td style="padding: 8px; border: 1px solid #ccc;">${readingTime} (mm:ss)</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc; font-weight: bold;">Velocidade Atual:</td>
                            <td style="padding: 8px; border: 1px solid #ccc;">${currentPPM} PPM (Palavras Por Minuto)</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc; font-weight: bold;">PPM Recomendado:</td>
                            <td style="padding: 8px; border: 1px solid #ccc;">${expectedPPM} PPM</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc; font-weight: bold;">Classifica√ß√£o:</td>
                            <td style="padding: 8px; border: 1px solid #ccc; font-weight: bold;">${classification}</td>
                        </tr>
                    </table>
                </div>

                <div style="margin-bottom: 25px;">
                    <h2 style="font-size: 14pt; font-weight: bold; margin-bottom: 15px; border-bottom: 1px solid #ccc; padding-bottom: 5px;">AN√ÅLISE DE DESEMPENHO</h2>
                    <table style="width: 100%; border-collapse: collapse;">
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc; font-weight: bold; width: 30%;">Progresso Anterior:</td>
                            <td style="padding: 8px; border: 1px solid #ccc;">${previousProgress}%</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc; font-weight: bold;">Progresso Atual:</td>
                            <td style="padding: 8px; border: 1px solid #ccc;">${currentProgress}%</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc; font-weight: bold;">Resultado Alcan√ßado:</td>
                            <td style="padding: 8px; border: 1px solid #ccc;">${achievedResult}%</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc; font-weight: bold;">M√©dia Letras/Palavra:</td>
                            <td style="padding: 8px; border: 1px solid #ccc;">${avgLetters}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc; font-weight: bold;">C√°lculo (Palavras/Letras):</td>
                            <td style="padding: 8px; border: 1px solid #ccc;">${wordsPerLetters}</td>
                        </tr>
                    </table>
                </div>

                <div style="margin-bottom: 25px;">
                    <h2 style="font-size: 14pt; font-weight: bold; margin-bottom: 15px; border-bottom: 1px solid #ccc; padding-bottom: 5px;">INTERPRETA√á√ÉO DOS RESULTADOS</h2>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        <li><strong>ADEQUADO:</strong> Velocidade de leitura igual ou superior ao esperado para o ano escolar</li>
                        <li><strong>EM DESENVOLVIMENTO:</strong> Velocidade entre 80% e 99% do esperado (necessita acompanhamento)</li>
                        <li><strong>NECESSITA APOIO:</strong> Velocidade inferior a 80% do esperado (requer interven√ß√£o pedag√≥gica)</li>
                    </ul>
                </div>

                <div style="margin-bottom: 25px;">
                    <h2 style="font-size: 14pt; font-weight: bold; margin-bottom: 15px; border-bottom: 1px solid #ccc; padding-bottom: 5px;">OBSERVA√á√ïES</h2>
                    <div style="margin-left: 20px; line-height: 1.8;">
                        <p><strong>Metodologia:</strong> A avalia√ß√£o foi realizada com base na leitura de letras aleat√≥rias em uma tabela de 10x10 c√©lulas (100 c√©lulas totais).</p>
                        
                        <p><strong>C√°lculos Realizados:</strong></p>
                        <ul style="margin-left: 20px;">
                            <li><strong>Velocidade (PPM):</strong> (C√©lulas Lidas √∑ Tempo em Segundos) √ó 60</li>
                            <li><strong>Progresso Atual:</strong> (C√©lulas Lidas √∑ 100) √ó 100</li>
                            <li><strong>Resultado Alcan√ßado:</strong> (Progresso Anterior + Progresso Atual) √∑ 2</li>
                            <li><strong>M√©dia Letras/Palavra:</strong> Total de Letras √∑ C√©lulas Lidas</li>
                            <li><strong>C√°lculo (Palavras/Letras):</strong> C√©lulas Lidas √∑ Total de Letras</li>
                        </ul>
                        
                        <p><strong>Dados da Sess√£o:</strong></p>
                        <ul style="margin-left: 20px;">
                            <li>Total de letras processadas: ${totalLetters}</li>
                            <li>C√©lulas com erro (clique duplo): ${Array.from(cellClickCounts.values()).filter(count => count === 2).length}</li>
                            <li>Efici√™ncia de leitura: ${((readCells / 100) * 100).toFixed(1)}%</li>
                        </ul>
                        
                        <p><strong>Recomenda√ß√µes:</strong> ${classification === 'ADEQUADO' ? 'Manter o ritmo de leitura e continuar praticando para consolidar as habilidades.' : classification === 'EM DESENVOLVIMENTO' ? 'Intensificar a pr√°tica de leitura com exerc√≠cios espec√≠ficos de flu√™ncia.' : 'Necess√°rio acompanhamento pedag√≥gico especializado e atividades de refor√ßo em leitura.'}</p>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #ccc;">
                    <p style="font-size: 10pt; color: #666;">
                        Relat√≥rio gerado automaticamente<br>
                        Sistema de Avalia√ß√£o de Flu√™ncia de Leitura
                    </p>
                </div>
            `;

            document.getElementById('report-content').innerHTML = reportContent;
        }

        function getYearText(value) {
            const yearMap = {
                '55': '1¬∫ Ano',
                '70': '2¬∫ Ano',
                '100': '3¬∫ Ano',
                '115': '4¬∫ Ano',
                '135': '5¬∫ Ano'
            };
            return yearMap[value] || '4¬∫ Ano';
        }

        function printReport() {
            const reportContent = document.getElementById('report-content').innerHTML;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Relat√≥rio de Avalia√ß√£o</title>
                    <style>
                        body { 
                            font-family: 'Times New Roman', serif; 
                            font-size: 12pt; 
                            line-height: 1.5; 
                            margin: 20mm;
                        }
                        @media print {
                            body { margin: 0; }
                        }
                    </style>
                </head>
                <body>
                    ${reportContent}
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        // Fun√ß√µes do Modal de Configura√ß√£o
        function openConfigModal() {
            document.getElementById('config-modal').classList.remove('hidden');
        }

        function closeConfigModal() {
            document.getElementById('config-modal').classList.add('hidden');
        }

        function resetConfigForm() {
            document.getElementById('config-form').reset();
        }

        function saveConfiguration() {
            const studentName = document.getElementById('modal-studentName').value;
            const classYear = document.getElementById('modal-classYear').value;
            const teacherName = document.getElementById('modal-teacherName').value;
            const previousProgress = document.getElementById('modal-previousProgress').value || '0';
            const schoolYear = document.getElementById('modal-schoolYear').value;

            // Validar campos obrigat√≥rios
            if (!studentName || !classYear || !teacherName || !schoolYear) {
                // Criar mensagem de erro inline em vez de alert
                let errorMsg = document.getElementById('config-error');
                if (!errorMsg) {
                    errorMsg = document.createElement('div');
                    errorMsg.id = 'config-error';
                    errorMsg.className = 'bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4';
                    document.getElementById('config-form').insertBefore(errorMsg, document.getElementById('config-form').firstChild);
                }
                errorMsg.innerHTML = '‚ö†Ô∏è Por favor, preencha todos os campos obrigat√≥rios marcados com *';
                return false;
            }

            // Remover mensagem de erro se existir
            const errorMsg = document.getElementById('config-error');
            if (errorMsg) {
                errorMsg.remove();
            }

            // Salvar dados nos campos ocultos (para compatibilidade com c√≥digo existente)
            const hiddenInputs = {
                studentName: studentName,
                classYear: classYear,
                teacherName: teacherName,
                previousProgress: previousProgress,
                schoolYear: schoolYear
            };

            // Criar campos ocultos se n√£o existirem
            Object.keys(hiddenInputs).forEach(key => {
                let input = document.getElementById(key);
                if (!input) {
                    input = document.createElement('input');
                    input.type = 'hidden';
                    input.id = key;
                    document.body.appendChild(input);
                }
                input.value = hiddenInputs[key];
            });

            // Atualizar displays visuais
            document.getElementById('display-studentName').textContent = studentName;
            document.getElementById('display-classYear').textContent = classYear;
            document.getElementById('display-teacherName').textContent = teacherName;

            // Atualizar display do ano escolar
            const schoolYearOption = document.querySelector(`#modal-schoolYear option[value="${schoolYear}"]`);
            document.getElementById('display-schoolYear').textContent = schoolYearOption ? schoolYearOption.textContent : '-';

            // Fechar modal
            closeConfigModal();

            // Atualizar sistema
            updateTimePerLetterForYear();
            updateCalculations();

            return true;
        }

        // Event listeners para o modal de configura√ß√£o
        document.getElementById('config-form').addEventListener('submit', function (e) {
            e.preventDefault();
            saveConfiguration();
        });

        // Event listeners para o modal de relat√≥rio
        document.getElementById('close-report').addEventListener('click', closeReportModal);
        document.getElementById('print-report').addEventListener('click', printReport);

        // Inicializar sistema
        updateDisplay();
        updateCalculations();
        updateTimePerLetterForYear(); // Definir tempo inicial baseado no ano selecionado
    </script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'99e7af9af5702d34',t:'MTc2MzEzNTY1MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>