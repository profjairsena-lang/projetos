<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escrevil√¢ndia: A terra da escrita - Sistema Completo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap');

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #d1b670;
        }

        .word-input {
            transition: all 0.3s ease;
        }

        .word-input:focus-within {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 8px;
            max-height: 300px;
            max-width: 500px;
            overflow-y: auto;
        }

        .emoji-item {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            height: 48px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .emoji-item:hover {
            background-color: #e0f2fe;
            transform: scale(1.1);
        }

        .emoji-selected {
            background-color: #bfdbfe;
            border: 2px solid #3b82f6;
        }

        .emoji-button {
            transition: all 0.2s;
        }

        .emoji-button:hover {
            transform: scale(1.1);
        }

        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.5);
            transition: opacity 0.3s ease;
        }

        .modal-content {
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }

        .modal-active .modal-content {
            transform: scale(1);
        }

        .btn-primary {
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.5);
        }

        .category-button {
            transition: all 0.2s;
        }

        .category-button.active {
            background-color: #3b82f6;
            color: white;
        }

        .category-button:hover:not(.active) {
            background-color: #e0f2fe;
        }

        .emoji-preview {
            font-size: 36px;
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 12px;
            background-color: #d87dc6;
            transition: all 0.3s;
        }

        .emoji-preview:hover {
            transform: scale(1.1);
            background-color: #ffffff;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        .word-card {
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }

        .word-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .letter-input {
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            text-align: center;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            transition: all 0.2s ease;
            text-transform: uppercase;
        }

        .letter-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            outline: none;
        }

        .letter-input.correct {
            border-color: #10b981;
            background-color: #f0fdf4;
        }

        .letter-input.incorrect {
            border-color: #ef4444;
            background-color: #fef2f2;
        }

        .progress-bar {
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(to right, #3b82f6, #10b981);
            transition: width 0.5s ease;
        }

        .hypothesis-pre-silabica {
            background-color: #fef2f2;
            color: #dc2626;
            border: 2px solid #fecaca;
        }

        .hypothesis-silabica {
            background-color: #fef3c7;
            color: #d97706;
            border: 2px solid #fed7aa;
        }

        .hypothesis-silabico-alfabetica {
            background-color: #ecfdf5;
            color: #059669;
            border: 2px solid #a7f3d0;
        }

        .hypothesis-alfabetica {
            background-color: #eff6ff;
            color: #2563eb;
            border: 2px solid #bfdbfe;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chart-bar {
            transition: width 0.8s ease-in-out;
        }
    </style>
</head>

<body>
    <!-- Tela 1: Entrada de Palavras -->
    <div id="input-screen" class="screen active">
        <div class="min-h-screen bg-gradient-to-b from-red-50 to-blue-300 py-12">
            <div class="container mx-auto px-4 max-w-4xl">
                <!-- Cabe√ßalho -->
                <header class="mb-10 text-center">
                    <h1 class="text-3xl md:text-4xl font-bold text-indigo-600 mb-3">Escrevil√¢ndia: A terra da escrita
                    </h1>
                    <p class="text-lg text-gray-600">Prepara√ß√£o para avalia√ß√£o da escrita infantil</p>
                </header>

                <!-- Conte√∫do Principal -->
                <main class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                    <div class="mb-8">
                        <h2 class="text-2xl font-bold text-gray-800 mb-2">Entrada de Palavras</h2>
                        <p class="text-gray-600">Professor(a), por favor, digite quatro palavras que a crian√ßa ir√°
                            escrever. Para cada palavra, escolha um √≠cone ou emoji que a represente bem.</p>
                    </div>

                    <!-- Formul√°rio de Palavras -->
                    <form id="wordForm" class="space-y-6">
                        <!-- Palavra 1 -->
                        <div class="word-input bg-green-50 rounded-xl p-5 flex flex-col md:flex-row gap-4 items-center">
                            <div class="emoji-preview cursor-pointer" data-index="0">
                                üí¨
                            </div>
                            <div class="flex-grow">
                                <label for="word1" class="block text-sm font-medium text-gray-700 mb-1">gabriel
                                    1</label>
                                <input type="text" id="word1" name="word1"
                                    class="w-full border-2 border-green-200 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-blue-500"
                                    placeholder="Digite uma palavra..." required>
                            </div>

                        </div>

                        <!-- Palavra 2 -->
                        <div class="word-input bg-blue-50 rounded-xl p-5 flex flex-col md:flex-row gap-4 items-center">
                            <div class="emoji-preview cursor-pointer" data-index="1">
                                üí¨
                            </div>
                            <div class="flex-grow">
                                <label for="word2" class="block text-sm font-medium text-gray-700 mb-1">Palavra
                                    2</label>
                                <input type="text" id="word2" name="word2"
                                    class="w-full border-2 border-blue-200 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                    placeholder="Digite uma palavra..." required>
                            </div>
                            <button type="button"
                                class="emoji-button bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-2 rounded-lg flex items-center"
                                data-index="1">
                                <span class="mr-2">Escolher √çcone</span>
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                    fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-7.536 5.879a1 1 0 001.415 0 3 3 0 014.242 0 1 1 0 001.415-1.415 5 5 0 00-7.072 0 1 1 0 000 1.415z"
                                        clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>

                        <!-- Palavra 3 -->
                        <div class="word-input bg-blue-50 rounded-xl p-5 flex flex-col md:flex-row gap-4 items-center">
                            <div class="emoji-preview cursor-pointer" data-index="2">
                                üí¨
                            </div>
                            <div class="flex-grow">
                                <label for="word3" class="block text-sm font-medium text-gray-700 mb-1">Palavra
                                    3</label>
                                <input type="text" id="word3" name="word3"
                                    class="w-full border-2 border-blue-200 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                    placeholder="Digite uma palavra..." required>
                            </div>
                            <button type="button"
                                class="emoji-button bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-2 rounded-lg flex items-center"
                                data-index="2">
                                <span class="mr-2">Escolher √çcone</span>
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                    fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-7.536 5.879a1 1 0 001.415 0 3 3 0 014.242 0 1 1 0 001.415-1.415 5 5 0 00-7.072 0 1 1 0 000 1.415z"
                                        clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>

                        <!-- Palavra 4 -->
                        <div class="word-input bg-blue-50 rounded-xl p-5 flex flex-col md:flex-row gap-4 items-center">
                            <div class="emoji-preview cursor-pointer" data-index="3">
                                üí¨
                            </div>
                            <div class="flex-grow">
                                <label for="word4" class="block text-sm font-medium text-gray-700 mb-1">Palavra
                                    4</label>
                                <input type="text" id="word4" name="word4"
                                    class="w-full border-2 border-blue-200 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                    placeholder="Digite uma palavra..." required>
                            </div>
                            <button type="button"
                                class="emoji-button bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-2 rounded-lg flex items-center"
                                data-index="3">
                                <span class="mr-2">Escolher √çcone</span>
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                    fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-7.536 5.879a1 1 0 001.415 0 3 3 0 014.242 0 1 1 0 001.415-1.415 5 5 0 00-7.072 0 1 1 0 000 1.415z"
                                        clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>

                        <!-- Bot√µes de A√ß√£o -->
                        <div class="flex justify-between pt-4">
                            <button type="button"
                                class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-6 rounded-lg">
                                Cancelar
                            </button>
                            <div class="flex gap-3">
                                <button type="button" id="previewBtn"
                                    class="bg-indigo-100 hover:bg-indigo-200 text-indigo-700 font-bold py-3 px-6 rounded-lg">
                                    Visualizar
                                </button>
                                <button type="button" id="nextBtn"
                                    class="btn-primary bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg">
                                    Pr√≥ximo
                                </button>
                            </div>
                        </div>
                    </form>
                </main>

                <!-- Rodap√© -->
                <footer class="mt-8 text-center text-gray-500 text-sm">
                    <p>¬© 2025 Escrevil√¢ndia: A terra da escrita - Ferramenta para avalia√ß√£o da escrita infantil</p>
                </footer>
            </div>
        </div>
    </div>

    <!-- Tela 2: An√°lise de Palavras -->
    <div id="analysis-screen" class="screen">
        <div class="min-h-screen bg-gradient-to-b from-blue-50 to-indigo-100 py-8">
            <div class="container mx-auto px-4 max-w-4xl">
                <!-- Cabe√ßalho -->
                <header class="mb-8">
                    <h1 class="text-3xl md:text-4xl font-bold text-indigo-600 mb-3 text-center">An√°lise de Palavras</h1>

                    <div class="flex items-center justify-between max-w-2xl mx-auto">
                        <p class="text-lg text-gray-600 w-[70%]">Observe o √≠cone e escreva a palavra correspondente</p>
                        <button id="analyze-btn"
                            class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium w-[28%]">
                            Analisar Palavra
                        </button>
                    </div>

                    <!-- Barra de Progresso -->
                    <div class="mt-6 max-w-md mx-auto">
                        <div class="flex justify-between text-sm text-gray-600 mb-2">
                            <span>Progresso</span>
                            <span id="progress-text">1/4 palavras</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div id="progress-bar" class="progress-bar w-1/4"></div>
                        </div>
                    </div>
                </header>

                <!-- Palavra Atual -->
                <main class="max-w-2xl mx-auto">
                    <div class="word-card bg-white rounded-2xl shadow-lg p-8 text-center fade-in">
                        <div class="mb-8">
                            <div class="text-8xl mb-6" id="current-emoji">üê∂</div>
                            <h3 class="text-2xl font-bold text-gray-800" id="current-word-title">Palavra 1</h3>
                        </div>

                        <div class="flex justify-center mb-8">
                            <div id="current-letter-inputs" class="flex gap-3 flex-wrap justify-center">
                                <!-- Inputs de letras ser√£o inseridos aqui -->
                            </div>
                        </div>

                        <!-- Bot√£o de an√°lise movido para o cabe√ßalho -->

                        <div id="current-analysis" class="mt-8 hidden">
                            <!-- An√°lise ser√° inserida aqui -->
                        </div>

                        <div id="navigation-buttons" class="mt-8 hidden">
                            <button id="next-word-btn"
                                class="bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg text-lg font-medium">
                                Pr√≥xima Palavra
                            </button>
                        </div>
                    </div>
                </main>

                <!-- Bot√µes de A√ß√£o -->
                <div class="flex justify-center gap-4 mt-8">
                    <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-6 rounded-lg"
                        onclick="goBackToInput()">
                        Voltar
                    </button>
                    <button id="finish-btn"
                        class="btn-primary bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg hidden">
                        Finalizar An√°lise
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Tela 3: Avalia√ß√£o Final -->
    <div id="evaluation-screen" class="screen">
        <div class="min-h-screen bg-gradient-to-b from-green-50 to-blue-100 py-8">
            <div class="container mx-auto px-4 max-w-6xl">
                <!-- Cabe√ßalho -->
                <header class="mb-8 text-center">
                    <h1 class="text-3xl md:text-4xl font-bold text-green-600 mb-3">Avalia√ß√£o da Escrita</h1>
                    <p class="text-lg text-gray-600">An√°lise completa do n√≠vel de escrita do aluno</p>
                </header>

                <!-- Resultado Principal -->
                <div class="bg-white rounded-2xl shadow-lg p-8 mb-8 text-center">
                    <div class="mb-6">
                        <div id="final-hypothesis-badge"
                            class="inline-block px-6 py-3 rounded-full text-xl font-bold mb-4">
                            <!-- Hip√≥tese final ser√° inserida aqui -->
                        </div>
                        <h2 class="text-2xl font-bold text-gray-800 mb-2">N√≠vel de Escrita Identificado</h2>
                        <p id="hypothesis-description" class="text-gray-600 text-lg">
                            <!-- Descri√ß√£o da hip√≥tese ser√° inserida aqui -->
                        </p>
                    </div>

                    <!-- Gr√°fico de Precis√£o -->
                    <div class="mb-8">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Precis√£o Geral</h3>
                        <div class="max-w-md mx-auto">
                            <div class="flex justify-between text-sm text-gray-600 mb-2">
                                <span>Acertos</span>
                                <span id="overall-accuracy">0%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-4">
                                <div id="overall-progress-bar"
                                    class="chart-bar h-4 rounded-full bg-gradient-to-r from-green-400 to-blue-500">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- An√°lise Detalhada -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <!-- An√°lise por Palavra (Protegida por senha) -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold text-gray-800">An√°lise por Palavra</h3>
                            <button id="unlock-analysis-btn"
                                class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-sm font-medium">
                                Desbloquear
                            </button>
                        </div>

                        <!-- √Årea de senha (inicialmente oculta) -->
                        <div id="password-area" class="bg-gray-50 p-4 rounded-lg hidden">
                            <p class="text-sm text-gray-600 mb-3">Esta se√ß√£o est√° protegida. Digite a senha
                                administrativa para visualizar os detalhes.</p>
                            <div class="flex gap-2">
                                <input type="password" id="admin-password"
                                    class="flex-grow border-2 border-gray-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                    placeholder="Digite a senha...">
                                <button id="submit-password-btn"
                                    class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium">
                                    Verificar
                                </button>
                            </div>
                            <div id="password-error" class="text-red-500 text-sm mt-2 hidden">Senha incorreta. Tente
                                novamente.</div>
                        </div>

                        <!-- Detalhes das palavras (inicialmente ocultos) -->
                        <div id="word-analysis-details" class="space-y-4 hidden">
                            <!-- Detalhes das palavras ser√£o inseridos aqui -->
                        </div>
                    </div>

                    <!-- Distribui√ß√£o de Hip√≥teses -->
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Distribui√ß√£o de Hip√≥teses</h3>
                        <div id="hypothesis-distribution" class="space-y-3">
                            <!-- Distribui√ß√£o ser√° inserida aqui -->
                        </div>
                    </div>
                </div>

                <!-- Recomenda√ß√µes -->
                <div class="bg-white rounded-2xl shadow-lg p-8">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Recomenda√ß√µes Pedag√≥gicas</h3>
                    <div id="recommendations" class="prose max-w-none">
                        <!-- Recomenda√ß√µes ser√£o inseridas aqui -->
                    </div>
                </div>

                <!-- Bot√µes de A√ß√£o -->
                <div class="flex justify-center gap-4 mt-8">
                    <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-6 rounded-lg"
                        onclick="goBackToAnalysis()">
                        Voltar √† An√°lise
                    </button>
                    <button class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg"
                        onclick="startNewEvaluation()">
                        Nova Avalia√ß√£o
                    </button>
                    <button class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg"
                        onclick="showReportScreen()">
                        Gerar Relat√≥rio
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Tela 4: Relat√≥rio em Texto -->
    <div id="report-screen" class="screen">
        <div class="min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 py-8">
            <div class="container mx-auto px-4 max-w-4xl">
                <!-- Cabe√ßalho -->
                <header class="mb-8 text-center">
                    <h1 class="text-3xl md:text-4xl font-bold text-gray-700 mb-3">Relat√≥rio de Avalia√ß√£o</h1>
                    <p class="text-lg text-gray-600">Copie o texto abaixo para salvar em arquivo</p>
                </header>

                <!-- √Årea do Relat√≥rio -->
                <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-gray-800">Relat√≥rio Completo</h3>
                        <button id="copy-report-btn"
                            class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium">
                            üìã Copiar Texto
                        </button>
                    </div>

                    <textarea id="report-text"
                        class="w-full h-96 p-4 border-2 border-gray-200 rounded-lg font-mono text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                        readonly>
                        <!-- Relat√≥rio ser√° gerado aqui -->
                    </textarea>

                    <div class="mt-4 text-sm text-gray-600">
                        <p><strong>Instru√ß√µes:</strong></p>
                        <ul class="list-disc list-inside mt-2 space-y-1">
                            <li>Clique no bot√£o "Copiar Texto" para copiar todo o relat√≥rio</li>
                            <li>Cole o conte√∫do em um editor de texto (Bloco de Notas, Word, etc.)</li>
                            <li>Salve o arquivo com a extens√£o .txt ou .doc</li>
                        </ul>
                    </div>
                </div>

                <!-- Bot√µes de A√ß√£o -->
                <div class="flex justify-center gap-4">
                    <button class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-6 rounded-lg"
                        onclick="goBackToEvaluation()">
                        Voltar √† Avalia√ß√£o
                    </button>
                    <button class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg"
                        onclick="startNewEvaluation()">
                        Nova Avalia√ß√£o
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Emojis -->
    <div id="emojiModal"
        class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="modal-content bg-white rounded-2xl shadow-xl w-full max-w-2xl mx-4 p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-800">Escolha um √≠cone</h3>
                <button type="button" class="text-gray-500 hover:text-gray-700" onclick="closeEmojiModal()">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <!-- Barra de Pesquisa -->
            <div class="mb-4">
                <input type="text" id="emojiSearch"
                    class="w-full border-2 border-gray-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                    placeholder="Buscar √≠cones...">
            </div>

            <!-- Categorias -->
            <div class="flex flex-wrap gap-2 mb-4">
                <button type="button" class="category-button active px-3 py-1 rounded-lg text-sm"
                    data-category="all">Todos</button>
                <button type="button" class="category-button px-3 py-1 rounded-lg text-sm"
                    data-category="animals">Animais</button>
                <button type="button" class="category-button px-3 py-1 rounded-lg text-sm"
                    data-category="food">Alimentos</button>
                <button type="button" class="category-button px-3 py-1 rounded-lg text-sm"
                    data-category="objects">Objetos</button>
                <button type="button" class="category-button px-3 py-1 rounded-lg text-sm"
                    data-category="nature">Natureza</button>
                <button type="button" class="category-button px-3 py-1 rounded-lg text-sm"
                    data-category="transport">Transporte</button>
                <button type="button" class="category-button px-3 py-1 rounded-lg text-sm"
                    data-category="faces">Rostos</button>
            </div>

            <!-- Grid de Emojis -->
            <div class="emoji-grid mb-4" id="emojiGrid">
                <!-- Emojis ser√£o inseridos aqui via JavaScript -->
            </div>

            <!-- Bot√µes de A√ß√£o -->
            <div class="flex justify-end gap-3">
                <button type="button" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg"
                    onclick="closeEmojiModal()">
                    Cancelar
                </button>
                <button type="button" id="selectEmojiBtn"
                    class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">
                    Selecionar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Visualiza√ß√£o -->
    <div id="previewModal"
        class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="modal-content bg-white rounded-2xl shadow-xl w-full max-w-2xl mx-4 p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-800">Visualiza√ß√£o das Palavras</h3>
                <button type="button" class="text-gray-500 hover:text-gray-700" onclick="closePreviewModal()">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <div class="mb-6">
                <p class="text-gray-600">Estas s√£o as palavras e √≠cones que ser√£o apresentados para a crian√ßa:</p>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                <div class="bg-blue-50 p-4 rounded-xl flex flex-col items-center">
                    <div class="text-4xl mb-2" id="preview-emoji-0">üí¨</div>
                    <div class="font-bold text-center" id="preview-word-0">Palavra 1</div>
                </div>
                <div class="bg-blue-50 p-4 rounded-xl flex flex-col items-center">
                    <div class="text-4xl mb-2" id="preview-emoji-1">üí¨</div>
                    <div class="font-bold text-center" id="preview-word-1">Palavra 2</div>
                </div>
                <div class="bg-blue-50 p-4 rounded-xl flex flex-col items-center">
                    <div class="text-4xl mb-2" id="preview-emoji-2">üí¨</div>
                    <div class="font-bold text-center" id="preview-word-2">Palavra 3</div>
                </div>
                <div class="bg-blue-50 p-4 rounded-xl flex flex-col items-center">
                    <div class="text-4xl mb-2" id="preview-emoji-3">üí¨</div>
                    <div class="font-bold text-center" id="preview-word-3">Palavra 4</div>
                </div>
            </div>

            <div class="flex justify-end">
                <button type="button" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg"
                    onclick="closePreviewModal()">
                    Fechar
                </button>
            </div>
        </div>
    </div>

    <script>
        // Dados dos emojis por categoria
        const emojiData = {
            animals: [
                { emoji: "üê∂", name: "cachorro" },
                { emoji: "üê±", name: "gato" },
                { emoji: "üê≠", name: "rato" },
                { emoji: "üêπ", name: "hamster" },
                { emoji: "üê∞", name: "coelho" },
                { emoji: "ü¶ä", name: "raposa" },
                { emoji: "üêª", name: "urso" },
                { emoji: "üêº", name: "panda" },
                { emoji: "üê®", name: "coala" },
                { emoji: "üêØ", name: "tigre" },
                { emoji: "ü¶Å", name: "le√£o" },
                { emoji: "üêÆ", name: "vaca" },
                { emoji: "üê∑", name: "porco" },
                { emoji: "üê∏", name: "sapo" },
                { emoji: "üêµ", name: "macaco" },
                { emoji: "üêî", name: "galinha" },
                { emoji: "üêß", name: "pinguim" },
                { emoji: "üê¶", name: "p√°ssaro" },
                { emoji: "ü¶Ü", name: "pato" },
                { emoji: "ü¶â", name: "coruja" }
            ],
            food: [
                { emoji: "üçé", name: "ma√ß√£" },
                { emoji: "üçê", name: "pera" },
                { emoji: "üçä", name: "laranja" },
                { emoji: "üçã", name: "lim√£o" },
                { emoji: "üçå", name: "banana" },
                { emoji: "üçâ", name: "melancia" },
                { emoji: "üçá", name: "uva" },
                { emoji: "üçì", name: "morango" },
                { emoji: "üçà", name: "mel√£o" },
                { emoji: "üçí", name: "cereja" },
                { emoji: "üçë", name: "p√™ssego" },
                { emoji: "ü•≠", name: "manga" },
                { emoji: "üçç", name: "abacaxi" },
                { emoji: "ü••", name: "coco" },
                { emoji: "ü•ù", name: "kiwi" },
                { emoji: "üçÖ", name: "tomate" },
                { emoji: "ü•ë", name: "abacate" },
                { emoji: "üçÜ", name: "berinjela" },
                { emoji: "ü•î", name: "batata" },
                { emoji: "ü•ï", name: "cenoura" }
            ],
            objects: [
                { emoji: "‚åö", name: "rel√≥gio" },
                { emoji: "üì±", name: "celular" },
                { emoji: "üíª", name: "laptop" },
                { emoji: "‚å®Ô∏è", name: "teclado" },
                { emoji: "üñ•Ô∏è", name: "computador" },
                { emoji: "üñ®Ô∏è", name: "impressora" },
                { emoji: "üñ±Ô∏è", name: "mouse" },
                { emoji: "üì∑", name: "c√¢mera" },
                { emoji: "üì∏", name: "c√¢mera" },
                { emoji: "üìπ", name: "filmadora" },
                { emoji: "üé•", name: "c√¢mera de cinema" },
                { emoji: "üìû", name: "telefone" },
                { emoji: "‚òéÔ∏è", name: "telefone" },
                { emoji: "üì∫", name: "televis√£o" },
                { emoji: "üìª", name: "r√°dio" },
                { emoji: "üéôÔ∏è", name: "microfone" },
                { emoji: "‚è∞", name: "despertador" },
                { emoji: "üí°", name: "l√¢mpada" },
                { emoji: "üî¶", name: "lanterna" },
                { emoji: "üïØÔ∏è", name: "vela" }
            ],
            nature: [
                { emoji: "üåç", name: "terra" },
                { emoji: "üåé", name: "terra" },
                { emoji: "üåè", name: "terra" },
                { emoji: "üåï", name: "lua cheia" },
                { emoji: "üåô", name: "lua crescente" },
                { emoji: "‚òÄÔ∏è", name: "sol" },
                { emoji: "‚≠ê", name: "estrela" },
                { emoji: "üåü", name: "estrela brilhante" },
                { emoji: "üå†", name: "estrela cadente" },
                { emoji: "‚òÅÔ∏è", name: "nuvem" },
                { emoji: "‚õÖ", name: "sol atr√°s da nuvem" },
                { emoji: "üåà", name: "arco-√≠ris" },
                { emoji: "‚òÇÔ∏è", name: "guarda-chuva" },
                { emoji: "‚òî", name: "guarda-chuva com gotas de chuva" },
                { emoji: "‚ö°", name: "alta tens√£o" },
                { emoji: "‚ùÑÔ∏è", name: "floco de neve" },
                { emoji: "‚òÉÔ∏è", name: "boneco de neve" },
                { emoji: "üî•", name: "fogo" },
                { emoji: "üíß", name: "gota" },
                { emoji: "üåä", name: "onda" }
            ],
            transport: [
                { emoji: "üöó", name: "carro" },
                { emoji: "üöï", name: "t√°xi" },
                { emoji: "üöô", name: "utilit√°rio" },
                { emoji: "üöå", name: "√¥nibus" },
                { emoji: "üöé", name: "tr√≥lebus" },
                { emoji: "üèéÔ∏è", name: "carro de corrida" },
                { emoji: "üöì", name: "carro de pol√≠cia" },
                { emoji: "üöë", name: "ambul√¢ncia" },
                { emoji: "üöí", name: "caminh√£o de bombeiros" },
                { emoji: "üöê", name: "van" },
                { emoji: "üöö", name: "caminh√£o de entrega" },
                { emoji: "üöõ", name: "caminh√£o articulado" },
                { emoji: "üöú", name: "trator" },
                { emoji: "üõ¥", name: "patinete" },
                { emoji: "üö≤", name: "bicicleta" },
                { emoji: "üõµ", name: "scooter" },
                { emoji: "üèçÔ∏è", name: "motocicleta" },
                { emoji: "‚úàÔ∏è", name: "avi√£o" },
                { emoji: "üõ´", name: "avi√£o decolando" },
                { emoji: "üõ¨", name: "avi√£o pousando" }
            ],
            faces: [
                { emoji: "üòÄ", name: "rosto sorridente" },
                { emoji: "üòÉ", name: "rosto sorridente com olhos grandes" },
                { emoji: "üòÑ", name: "rosto sorridente com olhos sorridentes" },
                { emoji: "üòÅ", name: "rosto radiante com olhos sorridentes" },
                { emoji: "üòÜ", name: "rosto sorridente com olhos fechados" },
                { emoji: "üòÖ", name: "rosto sorridente com suor" },
                { emoji: "üòÇ", name: "rosto com l√°grimas de alegria" },
                { emoji: "ü§£", name: "rolando de rir" },
                { emoji: "üòä", name: "rosto sorridente com olhos sorridentes" },
                { emoji: "üòá", name: "rosto sorridente com aur√©ola" },
                { emoji: "üôÇ", name: "rosto levemente sorridente" },
                { emoji: "üôÉ", name: "rosto de cabe√ßa para baixo" },
                { emoji: "üòâ", name: "rosto piscando" },
                { emoji: "üòå", name: "rosto aliviado" },
                { emoji: "üòç", name: "rosto sorridente com olhos de cora√ß√£o" },
                { emoji: "ü•∞", name: "rosto sorridente com cora√ß√µes" },
                { emoji: "üòò", name: "rosto mandando beijo" },
                { emoji: "üòó", name: "rosto beijando" },
                { emoji: "üòô", name: "rosto beijando com olhos sorridentes" },
                { emoji: "üòö", name: "rosto beijando com olhos fechados" }
            ]
        };

        // Vari√°veis globais
        let currentEmojiIndex = 0;
        let selectedEmoji = null;
        let selectedEmojis = ['üí¨', 'üí¨', 'üí¨', 'üí¨'];
        let wordsData = null;
        let currentWordIndex = 0;
        let wordAnalyses = [];

        // Inicializa√ß√£o quando a p√°gina carrega
        document.addEventListener('DOMContentLoaded', function () {
            // Configurar event listeners para bot√µes de emoji
            const emojiButtons = document.querySelectorAll('.emoji-button');
            emojiButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const index = parseInt(this.getAttribute('data-index'));
                    openEmojiModal(index);
                });
            });

            // Configurar event listeners para previews de emoji
            const emojiPreviews = document.querySelectorAll('.emoji-preview');
            emojiPreviews.forEach(preview => {
                preview.addEventListener('click', function () {
                    const index = parseInt(this.getAttribute('data-index'));
                    openEmojiModal(index);
                });
            });

            // Configurar bot√£o de visualiza√ß√£o
            document.getElementById('previewBtn').addEventListener('click', openPreviewModal);

            // Configurar bot√£o pr√≥ximo
            document.getElementById('nextBtn').addEventListener('click', function () {
                if (validateForm()) {
                    showAnalysisScreen();
                }
            });

            // Configurar bot√£o de sele√ß√£o de emoji
            document.getElementById('selectEmojiBtn').addEventListener('click', function () {
                if (selectedEmoji) {
                    selectedEmojis[currentEmojiIndex] = selectedEmoji;
                    document.querySelector(`[data-index="${currentEmojiIndex}"].emoji-preview`).textContent = selectedEmoji;
                    closeEmojiModal();
                }
            });

            // Configurar bot√£o de copiar relat√≥rio
            document.getElementById('copy-report-btn').addEventListener('click', copyReportToClipboard);

            // Configurar categorias de emoji
            const categoryButtons = document.querySelectorAll('.category-button');
            categoryButtons.forEach(button => {
                button.addEventListener('click', function () {
                    // Remover classe active de todos os bot√µes
                    categoryButtons.forEach(btn => btn.classList.remove('active'));
                    // Adicionar classe active ao bot√£o clicado
                    this.classList.add('active');

                    const category = this.getAttribute('data-category');
                    populateEmojiGrid(category);
                });
            });

            // Configurar busca de emoji
            document.getElementById('emojiSearch').addEventListener('input', function () {
                const searchTerm = this.value;
                const activeCategory = document.querySelector('.category-button.active').getAttribute('data-category');
                populateEmojiGrid(activeCategory, searchTerm);
            });

            // Configurar bot√µes da tela de an√°lise
            document.getElementById('analyze-btn').addEventListener('click', analyzeCurrentWord);
            document.getElementById('next-word-btn').addEventListener('click', nextWord);
            document.getElementById('finish-btn').addEventListener('click', showEvaluationScreen);

            // Popular grid inicial de emojis
            populateEmojiGrid('all');
        });

        // Fun√ß√£o para validar o formul√°rio
        function validateForm() {
            const words = [
                document.getElementById('word1').value.trim(),
                document.getElementById('word2').value.trim(),
                document.getElementById('word3').value.trim(),
                document.getElementById('word4').value.trim()
            ];

            for (let i = 0; i < words.length; i++) {
                if (!words[i]) {
                    alert(`Por favor, preencha a Palavra ${i + 1}`);
                    return false;
                }
            }

            return true;
        }

        // Fun√ß√£o para abrir o modal de emojis
        function openEmojiModal(index) {
            currentEmojiIndex = index;
            selectedEmoji = null;

            // Limpar sele√ß√£o anterior
            const emojiItems = document.querySelectorAll('.emoji-item');
            emojiItems.forEach(item => {
                item.classList.remove('emoji-selected');
            });

            // Mostrar o modal
            document.getElementById('emojiModal').classList.remove('hidden');
            document.getElementById('emojiModal').classList.add('modal-active');

            // Focar na barra de pesquisa
            document.getElementById('emojiSearch').focus();
        }

        // Fun√ß√£o para fechar o modal de emojis
        function closeEmojiModal() {
            document.getElementById('emojiModal').classList.add('hidden');
            document.getElementById('emojiModal').classList.remove('modal-active');
        }

        // Fun√ß√£o para abrir o modal de visualiza√ß√£o
        function openPreviewModal() {
            // Atualizar os dados de visualiza√ß√£o
            for (let i = 0; i < 4; i++) {
                const wordInput = document.getElementById(`word${i + 1}`);
                const previewWord = document.getElementById(`preview-word-${i}`);
                const previewEmoji = document.getElementById(`preview-emoji-${i}`);

                previewWord.textContent = wordInput.value || `Palavra ${i + 1}`;
                previewEmoji.textContent = selectedEmojis[i];
            }

            // Mostrar o modal
            document.getElementById('previewModal').classList.remove('hidden');
            document.getElementById('previewModal').classList.add('modal-active');
        }

        // Fun√ß√£o para fechar o modal de visualiza√ß√£o
        function closePreviewModal() {
            document.getElementById('previewModal').classList.add('hidden');
            document.getElementById('previewModal').classList.remove('modal-active');
        }

        // Fun√ß√£o para popular o grid de emojis
        function populateEmojiGrid(category = 'all', searchTerm = '') {
            const emojiGrid = document.getElementById('emojiGrid');
            emojiGrid.innerHTML = '';

            // Determinar quais emojis mostrar com base na categoria e termo de pesquisa
            let emojisToShow = [];

            if (category === 'all') {
                // Combinar todos os emojis de todas as categorias
                Object.values(emojiData).forEach(categoryEmojis => {
                    emojisToShow = emojisToShow.concat(categoryEmojis);
                });
            } else {
                emojisToShow = emojiData[category] || [];
            }

            // Filtrar por termo de pesquisa, se houver
            if (searchTerm) {
                const searchTermLower = searchTerm.toLowerCase();
                emojisToShow = emojisToShow.filter(emoji =>
                    emoji.name.toLowerCase().includes(searchTermLower)
                );
            }

            // Adicionar emojis ao grid
            emojisToShow.forEach(emoji => {
                const emojiItem = document.createElement('div');
                emojiItem.className = 'emoji-item';
                emojiItem.textContent = emoji.emoji;
                emojiItem.title = emoji.name;

                emojiItem.addEventListener('click', function () {
                    // Remover sele√ß√£o anterior
                    document.querySelectorAll('.emoji-item').forEach(item => {
                        item.classList.remove('emoji-selected');
                    });

                    // Adicionar sele√ß√£o ao item clicado
                    this.classList.add('emoji-selected');
                    selectedEmoji = emoji.emoji;
                });

                emojiGrid.appendChild(emojiItem);
            });
        }

        // Fun√ß√£o para mostrar a tela de an√°lise
        function showAnalysisScreen() {
            // Esconder tela de entrada
            document.getElementById('input-screen').classList.remove('active');

            // Mostrar tela de an√°lise
            document.getElementById('analysis-screen').classList.add('active');

            // Inicializar a tela de an√°lise
            initializeAnalysisScreen();
        }

        // Fun√ß√£o para voltar √† tela de entrada
        function goBackToInput() {
            // Esconder tela de an√°lise
            document.getElementById('analysis-screen').classList.remove('active');

            // Mostrar tela de entrada
            document.getElementById('input-screen').classList.add('active');
        }

        // Fun√ß√£o para inicializar a tela de an√°lise
        function initializeAnalysisScreen() {
            // Obter dados das palavras
            const words = [
                document.getElementById('word1').value.trim().toUpperCase(),
                document.getElementById('word2').value.trim().toUpperCase(),
                document.getElementById('word3').value.trim().toUpperCase(),
                document.getElementById('word4').value.trim().toUpperCase()
            ];

            wordsData = {
                words: words,
                emojis: selectedEmojis
            };

            // Resetar vari√°veis
            currentWordIndex = 0;
            wordAnalyses = [];

            // Mostrar primeira palavra
            showCurrentWord();
        }

        // Fun√ß√£o para mostrar a palavra atual
        function showCurrentWord() {
            const currentEmoji = document.getElementById('current-emoji');
            const currentWordTitle = document.getElementById('current-word-title');
            const progressText = document.getElementById('progress-text');
            const progressBar = document.getElementById('progress-bar');

            // Atualizar emoji e t√≠tulo
            currentEmoji.textContent = wordsData.emojis[currentWordIndex];
            currentWordTitle.textContent = `Palavra ${currentWordIndex + 1}`;

            // Atualizar progresso
            progressText.textContent = `${currentWordIndex + 1}/4 palavras`;
            const progressPercentage = ((currentWordIndex + 1) / 4) * 100;
            progressBar.style.width = `${progressPercentage}%`;

            // Criar inputs para a palavra atual
            createLetterInputsForCurrentWord();

            // Esconder an√°lise e bot√µes de navega√ß√£o
            document.getElementById('current-analysis').classList.add('hidden');
            document.getElementById('navigation-buttons').classList.add('hidden');
            document.getElementById('analyze-btn').classList.remove('hidden');
        }

        // Fun√ß√£o para criar inputs de letras para a palavra atual
        function createLetterInputsForCurrentWord() {
            const word = wordsData.words[currentWordIndex];
            const container = document.getElementById('current-letter-inputs');
            container.innerHTML = '';

            for (let i = 0; i < word.length; i++) {
                const input = document.createElement('input');
                input.type = 'text';
                input.className = 'letter-input';
                input.maxLength = 1;
                input.setAttribute('data-letter-index', i);

                // Adicionar event listener para navega√ß√£o autom√°tica
                input.addEventListener('input', function () {
                    this.value = this.value.toUpperCase();

                    // Mover para o pr√≥ximo input
                    const nextInput = this.nextElementSibling;
                    if (nextInput && nextInput.classList.contains('letter-input')) {
                        nextInput.focus();
                    }
                });

                // Adicionar event listener para backspace
                input.addEventListener('keydown', function (e) {
                    if (e.key === 'Backspace' && this.value === '') {
                        const prevInput = this.previousElementSibling;
                        if (prevInput && prevInput.classList.contains('letter-input')) {
                            prevInput.focus();
                        }
                    }
                });

                container.appendChild(input);
            }

            // Focar no primeiro input
            if (container.firstChild) {
                container.firstChild.focus();
            }
        }

        // Fun√ß√£o para analisar a palavra atual
        function analyzeCurrentWord() {
            const word = wordsData.words[currentWordIndex];
            const inputs = document.querySelectorAll('#current-letter-inputs .letter-input');
            let userWord = '';

            // Coletar letras digitadas
            inputs.forEach(input => {
                userWord += input.value.toUpperCase() || '_';
            });

            // Comparar com a palavra correta
            let correctLetters = 0;
            inputs.forEach((input, index) => {
                const userLetter = input.value.toUpperCase();
                const correctLetter = word[index];

                if (userLetter === correctLetter) {
                    input.classList.add('correct');
                    input.classList.remove('incorrect');
                    correctLetters++;
                } else if (userLetter) {
                    input.classList.add('incorrect');
                    input.classList.remove('correct');
                } else {
                    input.classList.remove('correct', 'incorrect');
                }
            });

            // Analisar padr√µes sil√°bicos
            const vowels = ['A', 'E', 'I', 'O', 'U', '√Å', '√â', '√ç', '√ì', '√ö', '√Ç', '√ä', '√é', '√î', '√õ', '√É', '√ï'];
            const consonants = ['B', 'C', 'D', 'F', 'G', 'H', 'J', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'X', 'Y', 'Z', '√á'];

            // Contar vogais e consoantes na palavra correta
            const wordVowels = [...word].filter(letter => vowels.includes(letter));
            const wordConsonants = [...word].filter(letter => consonants.includes(letter));

            // Contar vogais e consoantes na palavra do usu√°rio que est√£o na palavra correta
            const userLetters = [...userWord].filter(letter => letter !== '_');
            const userVowelsInWord = userLetters.filter(letter => vowels.includes(letter) && word.includes(letter));
            const userConsonantsInWord = userLetters.filter(letter => consonants.includes(letter) && word.includes(letter));

            // Calcular propor√ß√µes
            const vowelMatch = wordVowels.length > 0 ? userVowelsInWord.length / wordVowels.length : 0;
            const consonantMatch = wordConsonants.length > 0 ? userConsonantsInWord.length / wordConsonants.length : 0;

            // Calcular precis√£o e hip√≥tese
            const accuracy = Math.round((correctLetters / word.length) * 100);
            let hypothesis = '';
            let hypothesisClass = '';
            let hypothesisDetail = '';

            // Determinar hip√≥tese com base nos crit√©rios
            if (accuracy >= 90) {
                hypothesis = 'Alfab√©tica';
                hypothesisClass = 'hypothesis-alfabetica';
            } else if (accuracy >= 70 || (vowelMatch >= 0.7 && consonantMatch >= 0.5)) {
                hypothesis = 'Sil√°bico-Alfab√©tica';
                hypothesisClass = 'hypothesis-silabico-alfabetica';

                // Determinar se √© com valor de vogal ou consoante
                if (vowelMatch > consonantMatch) {
                    hypothesisDetail = 'com valor de vogal';
                } else if (consonantMatch > vowelMatch) {
                    hypothesisDetail = 'com valor de consoante';
                } else if (vowelMatch > 0 && consonantMatch > 0 && vowelMatch === consonantMatch) {
                    hypothesisDetail = 'com valor de vogal e consoante';
                }
            } else if (accuracy >= 40 || vowelMatch >= 0.5 || consonantMatch >= 0.5) {
                hypothesis = 'Sil√°bica';
                hypothesisClass = 'hypothesis-silabica';

                // Determinar se √© com valor de vogal ou consoante
                if (vowelMatch > consonantMatch) {
                    hypothesisDetail = 'com valor de vogal';
                } else if (consonantMatch > vowelMatch) {
                    hypothesisDetail = 'com valor de consoante';
                } else if (vowelMatch > 0 && consonantMatch > 0 && vowelMatch === consonantMatch) {
                    hypothesisDetail = 'com valor de vogal e consoante';
                }
            } else {
                hypothesis = 'Pr√©-Sil√°bica';
                hypothesisClass = 'hypothesis-pre-silabica';
            }

            // Armazenar an√°lise
            wordAnalyses[currentWordIndex] = {
                word: word,
                userWord: userWord,
                accuracy: accuracy,
                hypothesis: hypothesis,
                hypothesisDetail: hypothesisDetail,
                hypothesisClass: hypothesisClass,
                correctLetters: correctLetters,
                totalLetters: word.length,
                vowelMatch: Math.round(vowelMatch * 100),
                consonantMatch: Math.round(consonantMatch * 100)
            };

            // Mostrar an√°lise
            const analysisDiv = document.getElementById('current-analysis');
            analysisDiv.classList.remove('hidden');

            let hypothesisText = hypothesis;
            if (hypothesisDetail) {
                hypothesisText += ` (${hypothesisDetail})`;
            }

            analysisDiv.innerHTML = `
                <div class="bg-blue-50 p-6 rounded-lg">
                    <h4 class="font-bold text-gray-800 mb-4 text-xl">An√°lise da Palavra</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-left">
                        <div>
                            <p class="mb-2"><strong>Palavra correta:</strong> ${word}</p>
                            <p class="mb-2"><strong>Palavra digitada:</strong> ${userWord}</p>
                        </div>
                        <div>
                            <p class="mb-2"><strong>Precis√£o:</strong> ${accuracy}%</p>
                            <p><strong>Hip√≥tese:</strong> <span class="inline-block px-3 py-1 rounded-full text-sm font-bold ${hypothesisClass}">${hypothesisText}</span></p>
                        </div>
                    </div>
                    <div class="mt-3 text-sm text-gray-600">
                        <p>Correspond√™ncia de vogais: ${wordAnalyses[currentWordIndex].vowelMatch}%</p>
                        <p>Correspond√™ncia de consoantes: ${wordAnalyses[currentWordIndex].consonantMatch}%</p>
                    </div>
                </div>
            `;

            // Esconder bot√£o analisar e mostrar navega√ß√£o
            document.getElementById('analyze-btn').classList.add('hidden');

            if (currentWordIndex < 3) {
                document.getElementById('navigation-buttons').classList.remove('hidden');
            } else {
                document.getElementById('finish-btn').classList.remove('hidden');
            }
        }

        // Fun√ß√£o para ir para a pr√≥xima palavra
        function nextWord() {
            if (currentWordIndex < 3) {
                currentWordIndex++;
                showCurrentWord();
            }
        }

        // Fun√ß√£o para mostrar a tela de avalia√ß√£o
        function showEvaluationScreen() {
            // Esconder tela de an√°lise
            document.getElementById('analysis-screen').classList.remove('active');

            // Mostrar tela de avalia√ß√£o
            document.getElementById('evaluation-screen').classList.add('active');

            // Gerar avalia√ß√£o final
            generateFinalEvaluation();
        }

        // Fun√ß√£o para gerar a avalia√ß√£o final
        function generateFinalEvaluation() {
            // Calcular estat√≠sticas gerais
            const totalCorrectLetters = wordAnalyses.reduce((sum, analysis) => sum + analysis.correctLetters, 0);
            const totalLetters = wordAnalyses.reduce((sum, analysis) => sum + analysis.totalLetters, 0);
            const overallAccuracy = Math.round((totalCorrectLetters / totalLetters) * 100);

            // Determinar hip√≥tese predominante
            const hypothesisCounts = {
                'Pr√©-Sil√°bica': 0,
                'Sil√°bica': 0,
                'Sil√°bico-Alfab√©tica': 0,
                'Alfab√©tica': 0
            };

            wordAnalyses.forEach(analysis => {
                hypothesisCounts[analysis.hypothesis]++;
            });

            const predominantHypothesis = Object.keys(hypothesisCounts).reduce((a, b) =>
                hypothesisCounts[a] > hypothesisCounts[b] ? a : b
            );

            // Atualizar interface
            updateFinalHypothesis(predominantHypothesis, overallAccuracy);
            // N√£o mostrar detalhes da an√°lise por palavra at√© que a senha seja inserida
            // updateWordAnalysisDetails(); - Removido daqui
            updateHypothesisDistribution(hypothesisCounts);
            updateRecommendations(predominantHypothesis);

            // Configurar verifica√ß√£o de senha
            setupPasswordVerification();
        }

        // Fun√ß√£o para configurar verifica√ß√£o de senha
        function setupPasswordVerification() {
            const adminPassword = "jugra"; // Senha administrativa

            // Configurar bot√£o de desbloqueio
            document.getElementById('unlock-analysis-btn').addEventListener('click', function () {
                document.getElementById('password-area').classList.remove('hidden');
                document.getElementById('admin-password').focus();
            });

            // Configurar bot√£o de verifica√ß√£o de senha
            document.getElementById('submit-password-btn').addEventListener('click', function () {
                verifyPassword();
            });

            // Permitir pressionar Enter para verificar senha
            document.getElementById('admin-password').addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    verifyPassword();
                }
            });

            // Fun√ß√£o para verificar senha
            function verifyPassword() {
                const passwordInput = document.getElementById('admin-password');
                const passwordError = document.getElementById('password-error');

                if (passwordInput.value === adminPassword) {
                    // Senha correta
                    document.getElementById('password-area').classList.add('hidden');
                    document.getElementById('word-analysis-details').classList.remove('hidden');
                    document.getElementById('unlock-analysis-btn').classList.add('hidden');

                    // Mostrar mensagem de sucesso tempor√°ria
                    const successMessage = document.createElement('div');
                    successMessage.className = 'bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4 rounded';
                    successMessage.innerHTML = '<p class="font-bold">Acesso liberado!</p><p>Detalhes da an√°lise por palavra dispon√≠veis.</p>';

                    const wordAnalysisDetails = document.getElementById('word-analysis-details');
                    wordAnalysisDetails.parentNode.insertBefore(successMessage, wordAnalysisDetails);

                    // Remover mensagem ap√≥s 3 segundos
                    setTimeout(() => {
                        successMessage.remove();
                    }, 3000);

                    // Agora podemos mostrar os detalhes da an√°lise
                    updateWordAnalysisDetails();
                } else {
                    // Senha incorreta
                    passwordError.classList.remove('hidden');
                    passwordInput.value = '';
                    passwordInput.focus();

                    // Esconder mensagem de erro ap√≥s 3 segundos
                    setTimeout(() => {
                        passwordError.classList.add('hidden');
                    }, 3000);
                }
            }
        }

        // Fun√ß√£o para atualizar a hip√≥tese final
        function updateFinalHypothesis(hypothesis, accuracy) {
            const badge = document.getElementById('final-hypothesis-badge');
            const description = document.getElementById('hypothesis-description');
            const accuracySpan = document.getElementById('overall-accuracy');
            const progressBar = document.getElementById('overall-progress-bar');

            // Configurar badge
            let badgeClass = '';
            let descriptionText = '';

            // Determinar se h√° um padr√£o predominante de valor (vogal ou consoante)
            let predominantDetail = '';
            const detailCounts = {
                'com valor de vogal': 0,
                'com valor de consoante': 0
            };

            wordAnalyses.forEach(analysis => {
                if (analysis.hypothesis === hypothesis && analysis.hypothesisDetail) {
                    detailCounts[analysis.hypothesisDetail]++;
                }
            });

            if (detailCounts['com valor de vogal'] > detailCounts['com valor de consoante']) {
                predominantDetail = 'com valor de vogal';
            } else if (detailCounts['com valor de consoante'] > detailCounts['com valor de vogal']) {
                predominantDetail = 'com valor de consoante';
            }

            switch (hypothesis) {
                case 'Pr√©-Sil√°bica':
                    badgeClass = 'hypothesis-pre-silabica';
                    descriptionText = 'O aluno ainda n√£o compreende que a escrita representa os sons da fala. Utiliza letras ou s√≠mbolos de forma aleat√≥ria.';
                    break;
                case 'Sil√°bica':
                    badgeClass = 'hypothesis-silabica';
                    descriptionText = 'O aluno compreende que a escrita representa a fala e usa uma letra para cada s√≠laba da palavra.';
                    if (predominantDetail === 'com valor de vogal') {
                        descriptionText += ' H√° uma tend√™ncia a utilizar vogais para representar as s√≠labas.';
                    } else if (predominantDetail === 'com valor de consoante') {
                        descriptionText += ' H√° uma tend√™ncia a utilizar consoantes para representar as s√≠labas.';
                    } else if (predominantDetail === 'com valor de vogal e consoante') {
                        descriptionText += ' Utiliza tanto vogais quanto consoantes para representar as s√≠labas.';
                    }
                    break;
                case 'Sil√°bico-Alfab√©tica':
                    badgeClass = 'hypothesis-silabico-alfabetica';
                    descriptionText = 'O aluno est√° em transi√ß√£o, ora escreve uma letra por s√≠laba, ora escreve mais letras.';
                    if (predominantDetail === 'com valor de vogal') {
                        descriptionText += ' Demonstra maior facilidade em identificar as vogais nas palavras.';
                    } else if (predominantDetail === 'com valor de consoante') {
                        descriptionText += ' Demonstra maior facilidade em identificar as consoantes nas palavras.';
                    } else if (predominantDetail === 'com valor de vogal e consoante') {
                        descriptionText += ' Demonstra equil√≠brio na identifica√ß√£o de vogais e consoantes nas palavras.';
                    }
                    break;
                case 'Alfab√©tica':
                    badgeClass = 'hypothesis-alfabetica';
                    descriptionText = 'O aluno compreende que cada letra representa um som da fala, escrevendo de forma alfab√©tica.';
                    break;
            }

            let displayText = hypothesis;
            if (predominantDetail && (hypothesis === 'Sil√°bica' || hypothesis === 'Sil√°bico-Alfab√©tica')) {
                displayText += ` (${predominantDetail})`;
            }

            badge.className = `inline-block px-6 py-3 rounded-full text-xl font-bold mb-4 ${badgeClass}`;
            badge.textContent = displayText;
            description.textContent = descriptionText;
            accuracySpan.textContent = `${accuracy}%`;
            progressBar.style.width = `${accuracy}%`;
        }

        // Fun√ß√£o para atualizar detalhes da an√°lise por palavra
        function updateWordAnalysisDetails() {
            const container = document.getElementById('word-analysis-details');
            container.innerHTML = '';

            wordAnalyses.forEach((analysis, index) => {
                const wordDiv = document.createElement('div');
                wordDiv.className = 'bg-gray-50 p-4 rounded-lg';

                let hypothesisText = analysis.hypothesis;
                if (analysis.hypothesisDetail) {
                    hypothesisText += ` (${analysis.hypothesisDetail})`;
                }

                wordDiv.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <h4 class="font-bold text-gray-800">Palavra ${index + 1}: ${analysis.word}</h4>
                        <span class="text-sm font-medium text-gray-600">${analysis.accuracy}%</span>
                    </div>
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm text-gray-600">Escrita: ${analysis.userWord}</span>
                        <span class="inline-block px-2 py-1 rounded text-xs font-bold ${analysis.hypothesisClass}">${hypothesisText}</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2 mb-2">
                        <div class="h-2 rounded-full bg-gradient-to-r from-blue-400 to-green-500" style="width: ${analysis.accuracy}%"></div>
                    </div>
                    <div class="grid grid-cols-2 gap-2 text-xs text-gray-600">
                        <div>
                            <span>Vogais: ${analysis.vowelMatch}%</span>
                            <div class="w-full bg-gray-200 rounded-full h-1">
                                <div class="h-1 rounded-full bg-blue-400" style="width: ${analysis.vowelMatch}%"></div>
                            </div>
                        </div>
                        <div>
                            <span>Consoantes: ${analysis.consonantMatch}%</span>
                            <div class="w-full bg-gray-200 rounded-full h-1">
                                <div class="h-1 rounded-full bg-green-400" style="width: ${analysis.consonantMatch}%"></div>
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(wordDiv);
            });
        }

        // Fun√ß√£o para atualizar distribui√ß√£o de hip√≥teses
        function updateHypothesisDistribution(counts) {
            const container = document.getElementById('hypothesis-distribution');
            container.innerHTML = '';

            const hypotheses = [
                { name: 'Pr√©-Sil√°bica', class: 'hypothesis-pre-silabica' },
                { name: 'Sil√°bica', class: 'hypothesis-silabica' },
                { name: 'Sil√°bico-Alfab√©tica', class: 'hypothesis-silabico-alfabetica' },
                { name: 'Alfab√©tica', class: 'hypothesis-alfabetica' }
            ];

            hypotheses.forEach(hypothesis => {
                const count = counts[hypothesis.name];
                const percentage = (count / 4) * 100;

                const div = document.createElement('div');
                div.className = 'flex justify-between items-center';
                div.innerHTML = `
                    <span class="text-sm font-medium">${hypothesis.name}</span>
                    <div class="flex items-center gap-2">
                        <div class="w-20 bg-gray-200 rounded-full h-2">
                            <div class="chart-bar h-2 rounded-full ${hypothesis.class}" style="width: ${percentage}%"></div>
                        </div>
                        <span class="text-sm text-gray-600 w-8">${count}</span>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        // Fun√ß√£o para atualizar recomenda√ß√µes
        function updateRecommendations(hypothesis) {
            const container = document.getElementById('recommendations');
            let recommendations = '';

            switch (hypothesis) {
                case 'Pr√©-Sil√°bica':
                    recommendations = `
                        <h4 class="text-lg font-bold mb-3">Atividades Recomendadas:</h4>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li>Trabalhar com o nome pr√≥prio da crian√ßa</li>
                            <li>Explorar letras do alfabeto atrav√©s de jogos</li>
                            <li>Atividades de consci√™ncia fonol√≥gica (rimas, alitera√ß√µes)</li>
                            <li>Leitura di√°ria de hist√≥rias</li>
                            <li>Brincadeiras com sons das palavras</li>
                        </ul>
                    `;
                    break;
                case 'Sil√°bica':
                    recommendations = `
                        <h4 class="text-lg font-bold mb-3">Atividades Recomendadas:</h4>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li>Atividades de an√°lise fon√™mica</li>
                            <li>Trabalhar com fam√≠lias sil√°bicas</li>
                            <li>Jogos de forma√ß√£o de palavras</li>
                            <li>Escrita espont√¢nea com media√ß√£o</li>
                            <li>Compara√ß√£o entre palavras escritas</li>
                        </ul>
                    `;
                    break;
                case 'Sil√°bico-Alfab√©tica':
                    recommendations = `
                        <h4 class="text-lg font-bold mb-3">Atividades Recomendadas:</h4>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li>Atividades de segmenta√ß√£o de palavras</li>
                            <li>Jogos com letras m√≥veis</li>
                            <li>Escrita de listas e textos curtos</li>
                            <li>An√°lise de palavras conhecidas</li>
                            <li>Reescrita de textos memorizados</li>
                        </ul>
                    `;
                    break;
                case 'Alfab√©tica':
                    recommendations = `
                        <h4 class="text-lg font-bold mb-3">Atividades Recomendadas:</h4>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li>Produ√ß√£o de textos diversos</li>
                            <li>Trabalhar com ortografia</li>
                            <li>Revis√£o e reescrita de textos</li>
                            <li>Leitura de diferentes g√™neros textuais</li>
                            <li>Atividades de interpreta√ß√£o textual</li>
                        </ul>
                    `;
                    break;
            }

            container.innerHTML = recommendations;
        }

        // Fun√ß√£o para voltar √† an√°lise
        function goBackToAnalysis() {
            document.getElementById('evaluation-screen').classList.remove('active');
            document.getElementById('analysis-screen').classList.add('active');
        }

        // Fun√ß√£o para iniciar nova avalia√ß√£o
        function startNewEvaluation() {
            // Resetar todas as vari√°veis
            currentWordIndex = 0;
            wordAnalyses = [];
            selectedEmojis = ['üí¨', 'üí¨', 'üí¨', 'üí¨'];

            // Limpar formul√°rio
            document.getElementById('wordForm').reset();

            // Resetar emojis
            document.querySelectorAll('.emoji-preview').forEach((preview, index) => {
                preview.textContent = 'üí¨';
            });

            // Voltar √† primeira tela
            document.getElementById('evaluation-screen').classList.remove('active');
            document.getElementById('input-screen').classList.add('active');
        }

        // Fun√ß√£o para mostrar tela de relat√≥rio
        function showReportScreen() {
            // Esconder tela de avalia√ß√£o
            document.getElementById('evaluation-screen').classList.remove('active');

            // Mostrar tela de relat√≥rio
            document.getElementById('report-screen').classList.add('active');

            // Gerar relat√≥rio em texto
            generateTextReport();
        }

        // Fun√ß√£o para voltar √† avalia√ß√£o
        function goBackToEvaluation() {
            document.getElementById('report-screen').classList.remove('active');
            document.getElementById('evaluation-screen').classList.add('active');
        }

        // Fun√ß√£o para gerar relat√≥rio em texto
        function generateTextReport() {
            const now = new Date();
            const dateStr = now.toLocaleDateString('pt-BR');
            const timeStr = now.toLocaleTimeString('pt-BR');

            // Calcular estat√≠sticas
            const totalCorrectLetters = wordAnalyses.reduce((sum, analysis) => sum + analysis.correctLetters, 0);
            const totalLetters = wordAnalyses.reduce((sum, analysis) => sum + analysis.totalLetters, 0);
            const overallAccuracy = Math.round((totalCorrectLetters / totalLetters) * 100);

            // Determinar hip√≥tese predominante
            const hypothesisCounts = {
                'Pr√©-Sil√°bica': 0,
                'Sil√°bica': 0,
                'Sil√°bico-Alfab√©tica': 0,
                'Alfab√©tica': 0
            };

            // Contar ocorr√™ncias de cada hip√≥tese e detalhes
            const hypothesisDetails = {
                'Sil√°bica (com valor de vogal)': 0,
                'Sil√°bica (com valor de consoante)': 0,
                'Sil√°bica (com valor de vogal e consoante)': 0,
                'Sil√°bico-Alfab√©tica (com valor de vogal)': 0,
                'Sil√°bico-Alfab√©tica (com valor de consoante)': 0,
                'Sil√°bico-Alfab√©tica (com valor de vogal e consoante)': 0
            };

            wordAnalyses.forEach(analysis => {
                hypothesisCounts[analysis.hypothesis]++;

                if (analysis.hypothesisDetail) {
                    const fullHypothesis = `${analysis.hypothesis} (${analysis.hypothesisDetail})`;
                    if (hypothesisDetails[fullHypothesis] !== undefined) {
                        hypothesisDetails[fullHypothesis]++;
                    }
                }
            });

            const predominantHypothesis = Object.keys(hypothesisCounts).reduce((a, b) =>
                hypothesisCounts[a] > hypothesisCounts[b] ? a : b
            );

            // Verificar se a an√°lise por palavra foi desbloqueada
            const isWordAnalysisUnlocked = document.getElementById('word-analysis-details').classList.contains('hidden') === false;

            // Gerar texto do relat√≥rio
            let reportText = `
RELAT√ìRIO DE AVALIA√á√ÉO DA ESCRITA INFANTIL
==========================================

Data: ${dateStr}
Hor√°rio: ${timeStr}

RESULTADO GERAL
===============
N√≠vel de Escrita Identificado: ${predominantHypothesis}
Precis√£o Geral: ${overallAccuracy}%

`;

            // Incluir an√°lise detalhada por palavra apenas se estiver desbloqueada
            if (isWordAnalysisUnlocked) {
                reportText += `
AN√ÅLISE DETALHADA POR PALAVRA
=============================
`;

                wordAnalyses.forEach((analysis, index) => {
                    let hypothesisText = analysis.hypothesis;
                    if (analysis.hypothesisDetail) {
                        hypothesisText += ` (${analysis.hypothesisDetail})`;
                    }

                    reportText += `
Palavra ${index + 1}: ${analysis.word}
- Escrita do aluno: ${analysis.userWord}
- Precis√£o: ${analysis.accuracy}%
- Hip√≥tese: ${hypothesisText}
- Letras corretas: ${analysis.correctLetters}/${analysis.totalLetters}
- Correspond√™ncia de vogais: ${analysis.vowelMatch}%
- Correspond√™ncia de consoantes: ${analysis.consonantMatch}%
`;
                });
            } else {
                reportText += `
AN√ÅLISE DETALHADA POR PALAVRA
=============================
[ACESSO RESTRITO] Esta se√ß√£o requer senha administrativa.
Para visualizar os detalhes completos, volte √† tela de avalia√ß√£o e desbloqueie a se√ß√£o "An√°lise por Palavra".

`;
            }

            reportText += `
DISTRIBUI√á√ÉO DE HIP√ìTESES
========================
`;

            // Adicionar contagem b√°sica de hip√≥teses
            Object.keys(hypothesisCounts).forEach(hypothesis => {
                const count = hypothesisCounts[hypothesis];
                const percentage = Math.round((count / 4) * 100);
                reportText += `${hypothesis}: ${count} palavra(s) - ${percentage}%\n`;
            });

            // Adicionar detalhes de hip√≥teses (se houver)
            let hasDetails = false;
            Object.keys(hypothesisDetails).forEach(fullHypothesis => {
                const count = hypothesisDetails[fullHypothesis];
                if (count > 0) {
                    hasDetails = true;
                    const percentage = Math.round((count / 4) * 100);
                    reportText += `${fullHypothesis}: ${count} palavra(s) - ${percentage}%\n`;
                }
            });

            // Adicionar recomenda√ß√µes baseadas na hip√≥tese predominante
            reportText += `
RECOMENDA√á√ïES PEDAG√ìGICAS
========================
`;

            switch (predominantHypothesis) {
                case 'Pr√©-Sil√°bica':
                    reportText += `
O aluno encontra-se no n√≠vel Pr√©-Sil√°bico, onde ainda n√£o compreende que a escrita representa os sons da fala.

Atividades Recomendadas:
- Trabalhar com o nome pr√≥prio da crian√ßa
- Explorar letras do alfabeto atrav√©s de jogos
- Atividades de consci√™ncia fonol√≥gica (rimas, alitera√ß√µes)
- Leitura di√°ria de hist√≥rias
- Brincadeiras com sons das palavras
- Identifica√ß√£o de letras em diferentes contextos
- Escrita espont√¢nea com media√ß√£o do professor
`;
                    break;
                case 'Sil√°bica':
                    reportText += `
O aluno encontra-se no n√≠vel Sil√°bico, compreendendo que a escrita representa a fala e usando uma letra para cada s√≠laba.

Atividades Recomendadas:
- Atividades de an√°lise fon√™mica
- Trabalhar com fam√≠lias sil√°bicas
- Jogos de forma√ß√£o de palavras
- Escrita espont√¢nea com media√ß√£o
- Compara√ß√£o entre palavras escritas
- An√°lise de palavras com diferentes n√∫meros de s√≠labas
- Atividades de segmenta√ß√£o oral
`;
                    break;
                case 'Sil√°bico-Alfab√©tica':
                    reportText += `
O aluno encontra-se no n√≠vel Sil√°bico-Alfab√©tico, em transi√ß√£o entre a escrita sil√°bica e alfab√©tica.

Atividades Recomendadas:
- Atividades de segmenta√ß√£o de palavras
- Jogos com letras m√≥veis
- Escrita de listas e textos curtos
- An√°lise de palavras conhecidas
- Reescrita de textos memorizados
- Compara√ß√£o entre diferentes escritas da mesma palavra
- Reflex√£o sobre a quantidade de letras necess√°rias
`;
                    break;
                case 'Alfab√©tica':
                    reportText += `
O aluno encontra-se no n√≠vel Alfab√©tico, compreendendo que cada letra representa um som da fala.

Atividades Recomendadas:
- Produ√ß√£o de textos diversos
- Trabalhar com ortografia
- Revis√£o e reescrita de textos
- Leitura de diferentes g√™neros textuais
- Atividades de interpreta√ß√£o textual
- Estudo de regras ortogr√°ficas
- Amplia√ß√£o do vocabul√°rio
`;
                    break;
            }

            reportText += `
OBSERVA√á√ïES GERAIS
==================
Este relat√≥rio foi gerado automaticamente pelo Escrevil√¢ndia: A terra da escrita.
A avalia√ß√£o baseia-se na teoria da psicog√™nese da l√≠ngua escrita de Emilia Ferreiro e Ana Teberosky.

Para uma avalia√ß√£o mais completa, recomenda-se:
- Observa√ß√£o cont√≠nua do desenvolvimento da crian√ßa
- Aplica√ß√£o de outras atividades de escrita
- An√°lise de produ√ß√µes textuais espont√¢neas
- Acompanhamento do progresso ao longo do tempo

Professor(a): _________________________________
Escola: ______________________________________
Turma: _______________________________________
Aluno(a): ____________________________________

Data da pr√≥xima avalia√ß√£o: ___________________
`;

            // Inserir o texto no textarea
            document.getElementById('report-text').value = reportText.trim();
        }

        // Fun√ß√£o para copiar relat√≥rio para √°rea de transfer√™ncia
        function copyReportToClipboard() {
            const reportText = document.getElementById('report-text');
            reportText.select();
            reportText.setSelectionRange(0, 99999); // Para dispositivos m√≥veis

            try {
                document.execCommand('copy');

                // Feedback visual
                const button = document.getElementById('copy-report-btn');
                const originalText = button.innerHTML;
                button.innerHTML = '‚úÖ Copiado!';
                button.classList.add('bg-green-600');
                button.classList.remove('bg-blue-600');

                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.classList.remove('bg-green-600');
                    button.classList.add('bg-blue-600');
                }, 2000);

            } catch (err) {
                alert('Erro ao copiar. Por favor, selecione o texto manualmente e use Ctrl+C');
            }
        }
    </script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'97052521b22aaf0b',t:'MTc1NTM5MTQ4OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>